(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{11:function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i.r(e),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var r=window.scrawl||function(){var C={};function t(r){return function(n){return new Promise(function(t,e){var i=document.createElement(r),s="body",o="src";switch(i.onload=function(){t(n)},i.onerror=function(){e(n)},r){case"script":i.type="text/javascript",i.async=!0;break;case"link":i.type="text/css",i.rel="stylesheet",o="href",s="head"}i[o]=n,document[s].appendChild(i)})}}C.version="6.0.1",C.work={},C.work.nameslist=["padnames","cellnames","ctxnames","groupnames","designnames","entitynames","animationnames"],C.work.sectionlist=["pad","cell","canvas","context","ctx","imageData","group","design","dsn","entity","animation"],C.work.radian=Math.PI/180,C.work.promise=null,C.work.d={},C.work.v=null,C.work.colv1=null,C.work.colv2=null,C.work.o={},C.work.workquat=null,C.work.f=document.createDocumentFragment(),C.work.loadAlias={block:"scrawlBlock",wheel:"scrawlWheel",phrase:"scrawlPhrase",path:"scrawlPath",shape:"scrawlShape",images:"scrawlImages",animation:"scrawlAnimation",collisions:"scrawlCollisions",factories:"scrawlPathFactories",color:"scrawlColor",filters:"scrawlFilters",physics:"scrawlPhysics",saveload:"scrawlSaveLoad",stacks:"scrawlStacks",frame:"scrawlFrame",quaternion:"scrawlQuaternion",imageload:"scrawlImageLoad"},C.work.extensions=[],C.work.modules=C.work.extensions,C.device={},C.work.loadDependencies={block:[],wheel:[],phrase:[],path:[],shape:[],images:["imageload"],imageload:[],animation:[],collisions:[],factories:[],color:[],filters:[],physics:["quaternion"],saveload:[],stacks:["quaternion"],frame:[],quaternion:[]},C.init=function(){return C.entity||(C.reset(),C.device=new C.Device,C.pageInit(),C.createDefaultPad(),C.setDisplayOffsets("all"),C.physicsInit(),C.filtersInit(),C.animationInit()),C},C.pageInit=function(){C.device.canvas&&C.getCanvases()},C.physicsInit=function(){},C.filtersInit=function(){},C.createDefaultPad=function(){var t,e;C.device.canvas&&(t=(e=C.addCanvasToPage({name:"defaultHiddenCanvasElement"}).name)+"_base",C.removeItem(C.padnames,e),C.removeItem(C.work.activeListeners,e),C.work.f.appendChild(C.canvas[e]),C.work.cv=C.canvas[t],C.work.cvx=C.context[t],C.work.cvmodel=C.ctx[t],C.work.cvwrapper=C.cell[t],C.work.cvcontroller=C.pad[e])},C.reset=function(){for(var t=0,e=C.work.nameslist.length;t<e;t++)C[C.work.nameslist[t]]=[];for(var i=0,s=C.work.sectionlist.length;i<s;i++)C[C.work.sectionlist[i]]={};return C},C.simpleLoader={css:t("link"),js:t("script"),img:t("img")},C.checkForPromise=function(){return null!==C.work.promise?C.work.promise:"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?C.work.promise=!0:C.work.promise=!1},C.loadExtensions=function(t){return C.checkForPromise()?C.loadExtensionsUsingPromise(t):C.loadExtensionsUsingVanilla(t)},C.loadExtensionsUsingVanilla=function(t){var s,i,o,e,n,r,a,h,c,l,u,p;for(t=C.safeObject(t),s=t.path||"",i=C.isa_fn(t.callback)?t.callback:function(){},o=C.isa_fn(t.error)?t.error:function(){},e=C.xtGet(t.minified,!0),n=e?"-min.js":".js",r=[],h=Date.now(),u=function(e){var t,i=C.work.loadAlias[e]||e;C.contains(C.work.extensions,i)||((t=document.createElement("script")).type="text/javascript",t.async="true",t.onload=function(t){p(e)},t.onerror=function(t){p(e,!0)},t.src=/\.js$/.test(i)?s+i:s+i+n,document.body.appendChild(t))},p=function(t,e){C.removeItem(r,t),e||Date.now()>h+3e4?o():C.pushUnique(C.work.extensions,t),0===r.length&&i()},a=C.loadExtensionsConcatenator(t),r=[].concat(a),c=0,l=a.length;c<l;c++)u(a[c]);return C},C.loadExtensionsUsingPromise=function(t){var e,i,s,o,n,r,a,h,c,l,u;for(t=C.safeObject(t),e=C.simpleLoader,i=t.path||"",o=C.work.loadAlias,n=C.isa_fn(t.callback)?t.callback:function(){},r=C.isa_fn(t.error)?t.error:function(){},a=C.xtGet(t.minified,!0)?"-min.js":".js",c=[],l=0,u=(h=C.loadExtensionsConcatenator(t)).length;l<u;l++)s=o[h[l]]||h[l],c.push(e.js(/\.js$/.test(s)?i+s:i+s+a));return Promise.all(c).then(n).catch(r),C},C.loadExtensionsConcatenator=function(t){t=C.safeObject(t);var e,i,s,o,n=[],r=[],a=C.xt,h=C.pushUnique,c=C.work.loadDependencies;for(a(t.extensions)&&(n=n.concat([].concat(t.extensions))),e=0,i=(n=a(t.modules)?n.concat([].concat(t.modules)):n).length;e<i;e++){for(s=0,o=c[n[e]].length;s<o;s++)h(r,c[n[e]][s]);h(r,n[e])}return r},C.loadModules=C.loadExtensions,C.mergeInto=function(t,e){for(var i in e)e.hasOwnProperty(i)&&!C.xt(t[i])&&(t[i]=e[i]);return t},C.mergeOver=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},C.contains=function(t,e){return!!Array.isArray(t)&&0<=t.indexOf(e)},C.toInt=function(t){return(t=t.substring?parseFloat(t):t).toFixed?0|t:0},C.pushUnique=function(t,e){return t.indexOf(e)<0&&t.push(e),t},C.removeItem=function(t,e){e=t.indexOf(e);return 0<=e&&t.splice(e,1),t},C.isBetween=function(t,e,i,s){var o;return i<e&&(o=e,e=i,i=o),s?e<=t&&t<=i:e<t&&t<i},C.work.isa_whitelist=["str","fn","arr","bool","canvas","date","dom","event","img","num","realnum","obj","quaternion","vector","video"],C.isa=function(){var t,e;return 2==arguments.length&&(t=arguments[0],e=arguments[1].toLowerCase(),void 0!==t&&0<=C.work.isa_whitelist.indexOf(e))&&C["isa_"+e](t)},C.isa_str=function(t){return!(!t||!t.substring)},C.isa_fn=function(t){return"function"==typeof t},C.isa_arr=function(t){return!!Array.isArray(t)},C.isa_bool=function(t){return"boolean"==typeof t},C.isa_canvas=function(t){return"[object HTMLCanvasElement]"===Object.prototype.toString.call(t)},C.isa_date=function(t){return"[object Date]"===Object.prototype.toString.call(t)},C.isa_dom=function(t){return!!(t&&t.querySelector&&t.dispatchEvent)},C.isa_event=function(t){return!!(t&&t.preventDefault&&t.initEvent)},C.isa_img=function(t){return"[object HTMLImageElement]"===Object.prototype.toString.call(t)},C.isa_num=function(t){return!(!t||!t.toFixed)},C.isa_realnum=function(t){return!(!t||!t.toFixed||isNaN(t)||!isFinite(t))},C.isa_obj=function(t){return"[object Object]"===Object.prototype.toString.call(t)},C.isa_quaternion=function(t){return!(!t||!t.type||"Quaternion"!==t.type)},C.isa_vector=function(t){return!(!t||!t.type||"Vector"!==t.type)},C.isa_video=function(t){return"[object HTMLVideoElement]"===Object.prototype.toString.call(t)},C.safeObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)?t:C.work.o},C.xt=function(t){return void 0!==t},C.xtGet=function(){var t,e;if(0<arguments.length)for(t=0,e=arguments.length;t<e;t++)if(void 0!==arguments[t])return arguments[t];return null},C.xtGetTrue=function(){var t,e;if(0<arguments.length)for(t=0,e=arguments.length;t<e;t++)if(arguments[t])return arguments[t];return null},C.xta=function(){var t,e,i=arguments;if(0<(i=Array.isArray(arguments[0])?arguments[0]:i).length){for(t=0,e=i.length;t<e;t++)if(void 0===i[t])return!1;return!0}return!1},C.xto=function(){var t,e,i=arguments;if(0<(i=Array.isArray(arguments[0])?arguments[0]:i).length)for(t=0,e=i.length;t<e;t++)if(void 0!==i[t])return!0;return!1},C.makeName=function(t){var e;return t=C.safeObject(t),!!C.contains(C.work.nameslist,t.target)&&(e=C.xtGetTrue(t.name,t.type,"default").replace(/[\.\/ \+\*\[\{\(\)~\-#\\\^\$\|\?]/g,"_").split("___"),C.contains(C[t.target],e[0])?e[0]+"___"+Math.floor(1e8*Math.random()):e[0])},C.setDisplayOffsets=function(){for(var t=C.padnames,e=C.pad,i=0,s=t.length;i<s;i++)e[t[i]].setDisplayOffsets();return C},C.getCanvases=function(){var t,e,i,s=document.getElementsByTagName("canvas");if(0<s.length){for(e=0,i=s.length;e<i;e++)t=C.makePad({canvasElement:s[e]}),0===e&&(C.work.currentPad=t.name);return!0}return!1},C.addCanvasToPage=function(t){var e,i,s=C.xtGet;return t=C.safeObject(t),e=document.getElementById(t.parentElement)||document.body,i=document.createElement("canvas"),e.appendChild(i),t.width=s(t.width,300),t.height=s(t.height,150),t.canvasElement=i,t=new C.Pad(t),C.setDisplayOffsets(),t},C.clear=function(t){for(var e=C.pad,i=t?[].concat(t):C.padnames,s=0,o=i.length;s<o;s++)e[i[s]].clear();return C},C.compile=function(t,e){for(var i=C.pad,s=t?[].concat(t):C.padnames,o=0,n=s.length;o<n;o++)i[s[o]].compile(e);return C},C.show=function(t){for(var e=C.pad,i=t?[].concat(t):C.padnames,s=0,o=i.length;s<o;s++)e[i[s]].show();return C},C.render=function(t,e){for(var i=C.pad,s=t?[].concat(t):C.padnames,o=0,n=s.length;o<n;o++)i[s[o]].render(e);return C},C.addPercentages=function(t,e){return(t=parseFloat(t))+(e=parseFloat(e))+"%"},C.reversePercentage=function(t){return(t=-(t=parseFloat(t)))+"%"},C.subtractPercentages=function(t,e){return(t=parseFloat(t))-(e=parseFloat(e))+"%"},C.work.activeListeners=[],window.CustomEvent&&(C.triggerTouchEnter=function(t,e){C.updateCustomTouch(t,e,"touchenter")},C.triggerTouchLeave=function(t,e){C.updateCustomTouch(t,e,"touchleave")},C.triggerTouchFollow=function(t,e){C.updateCustomTouch(t,e,"touchfollow")},C.cloneTouchEventItem=function(t){var e={};return e.clientX=t.clientX,e.clientY=t.clientY,e.force=t.force,e.identifier=t.identifier,e.pageX=t.pageX,e.pageY=t.pageY,e.radiusX=t.radiusX,e.radiusY=t.radiusY,e.screenX=t.screenX,e.screenY=t.screenY,e.target=t.target,e},C.updateCustomTouch=function(t,e,i){var s,o,n=[],r=[],a=[],h=C.xt,c=C.cloneTouchEventItem;if(h(t.changedTouches))for(s=0,o=t.changedTouches.length;s<o;s++)n.push(c(t.changedTouches[s]));if(h(t.targetTouches))for(s=0,o=t.targetTouches.length;s<o;s++)r.push(c(t.targetTouches[s]));if(h(t.touches))for(s=0,o=t.touches.length;s<o;s++)a.push(c(t.touches[s]));i=new CustomEvent(i,{altKey:t.altKey,bubbles:t.bubbles,cancelBubble:t.cancelBubble,cancelable:t.cancelable,changedTouches:n,charCode:t.charCode,clipboardData:t.clipboardData,ctrlKey:t.ctrlKey,currentTarget:t.currentTarget,defaultPrevented:t.defaultPrevented,detail:{},eventPhase:t.eventPhase,keyCode:t.eventPhase,layerX:t.layerX,layerY:t.layerY,metaKey:t.metaKey,pageX:t.pageX,pageY:t.pageY,path:t.path,returnValue:t.returnValue,shiftKey:t.shiftKey,srcElement:t.srcElement,target:t.target,targetTouches:r,timestamp:t.timestamp,touches:a,view:t.view,which:t.which}),e.dispatchEvent(i)}),C.addNativeListener=function(t,e,i){var s,o,n,r,a;if(C.removeNativeListener(t,e,i),t=[].concat(t),s=i.substring?document.body.querySelectorAll(i):Array.isArray(i)?i:[i],C.isa_fn(e))for(r=0,a=t.length;r<a;r++)for(o=0,n=s.length;o<n;o++)s[o].addEventListener(t[r],e,!1)},C.removeNativeListener=function(t,e,i){var s,o,n,r,a;if(t=[].concat(t),s=i.substring?document.body.querySelectorAll(i):Array.isArray(i)?i:[i],C.isa_fn(e))for(r=0,a=t.length;r<a;r++)for(o=0,n=s.length;o<n;o++)s[o].removeEventListener(t[r],e,!1)},C.addListener=function(t,e,i){var s,o,n,r,a,h;if(C.removeListener(t,e,i),h=!(!navigator.pointerEnabled&&!navigator.msPointerEnabled),t=[].concat(t),s=i.substring?document.body.querySelectorAll(i):Array.isArray(i)?i:[i],C.isa_fn(e))for(r=0,a=t.length;r<a;r++)for(o=0,n=s.length;o<n;o++)if(C.isa_dom(s[o]))switch(t[r]){case"move":h?s[o].addEventListener("pointermove",e,!1):(s[o].addEventListener("mousemove",e,!1),s[o].addEventListener("touchmove",e,!1),s[o].addEventListener("touchfollow",e,!1));break;case"up":h?s[o].addEventListener("pointerup",e,!1):(s[o].addEventListener("mouseup",e,!1),s[o].addEventListener("touchend",e,!1));break;case"down":h?s[o].addEventListener("pointerdown",e,!1):(s[o].addEventListener("mousedown",e,!1),s[o].addEventListener("touchstart",e,!1));break;case"leave":h?s[o].addEventListener("pointerleave",e,!1):(s[o].addEventListener("mouseleave",e,!1),s[o].addEventListener("touchleave",e,!1));break;case"enter":h?s[o].addEventListener("pointerenter",e,!1):(s[o].addEventListener("mouseenter",e,!1),s[o].addEventListener("touchenter",e,!1))}return!0},C.removeListener=function(t,e,i){var s,o,n,r,a,h;if(t=[].concat(t),h=!(!navigator.pointerEnabled&&!navigator.msPointerEnabled),s=i.substring?document.body.querySelectorAll(i):Array.isArray(i)?i:[i],C.isa_fn(e))for(r=0,a=t.length;r<a;r++)for(o=0,n=s.length;o<n;o++)if(C.isa_dom(s[o]))switch(t[r]){case"move":h?s[o].removeEventListener("pointermove",e,!1):(s[o].removeEventListener("mousemove",e,!1),s[o].removeEventListener("touchmove",e,!1),s[o].removeEventListener("touchfollow",e,!1));break;case"up":h?s[o].removeEventListener("pointerup",e,!1):(s[o].removeEventListener("mouseup",e,!1),s[o].removeEventListener("touchend",e,!1));break;case"down":h?s[o].removeEventListener("pointerdown",e,!1):(s[o].removeEventListener("mousedown",e,!1),s[o].removeEventListener("touchstart",e,!1));break;case"leave":h?s[o].removeEventListener("pointerleave",e,!1):(s[o].removeEventListener("mouseleave",e,!1),s[o].removeEventListener("touchleave",e,!1));break;case"enter":h?s[o].removeEventListener("pointerenter",e,!1):(s[o].removeEventListener("mouseenter",e,!1),s[o].removeEventListener("touchenter",e,!1))}return!0},C.bucketSort=function(t,e,i){for(var s,o,n=[[]],r=0,a=i.length;r<a;r++)n[s=Math.floor(C[t][i[r]][e])]||(n[s]=[]),n[s].push(i[r]);for(o=[],r=0,a=n.length;r<a;r++)n[r]&&o.push(n[r]);return[].concat.apply([],o)},C.correctCoordinates=function(t,e){var i,s,o=C.xtGet;return t=C.safeObject(t),i=C.makeVector(t),!!C.xta(t.x,t.y)&&(e=C.cell[e]||C.cell[C.pad[C.work.currentPad].base],t=o((s=C.pad[e.pad]).localWidth,s.width,300),s=o(s.localHeight,s.height,150),t!==e.actualWidth&&(i.x/=t/e.actualWidth),s!==e.actualHeight&&(i.y/=s/e.actualHeight),i)},C.addNewCell=function(t,e){return e=e&&e.substring?e:C.work.currentPad,C.pad[e].addNewCell(t)},C.deleteCells=function(){for(var t,e,i=C.group,s=C.groupnames,o=C.removeItem,n=Array.prototype.slice.call(arguments),r=0,a=(n=Array.isArray(n[0])?n[0]:n).length;r<a;r++){for(t=0,e=C.padnames.length;t<e;t++)C.pad[C.padnames[t]].deleteCell(c[r]);delete i[n[r]],delete i[n[r]+"_field"],delete i[n[r]+"_fence"],o(s,n[r]),o(s,n[r]+"_field"),o(s,n[r]+"_fence"),delete C.context[n[r]],delete C.canvas[n[r]],delete C.ctx[C.cell[n[r]].context],o(C.ctxnames,C.cell[n[r]].context),delete C.cell[n[r]],o(C.cellnames,n[r])}return C},C.addEntitysToGroups=function(t,e){var i,s,o,n,r;if(C.xta(t,e))for(i=[].concat(t),s=[].concat(e),n=0,r=i.length;n<r;n++)(o=C.group[i[n]])&&o.addEntitysToGroup(s);return C},C.removeEntitysFromGroups=function(t,e){var i,s,o,n,r;if(C.xta(t,e))for(i=[].concat(t),s=[].concat(e),n=0,r=i.length;n<r;n++)(o=C.group[i[n]])&&o.removeEntitysFromGroup(s);return C},C.deleteEntity=function(){for(var t,e,i,s=C.removeItem,o=(C.animation,C.animationnames,Array.prototype.slice.call(arguments)),n=0,r=(o=Array.isArray(o[0])?o[0]:o).length;n<r;n++)if(i=C.entity[o[n]])for(C.pathDeleteEntity(i),i=i.context,s(C.ctxnames,i),delete C.ctx[i],s(C.entitynames,o[n]),delete C.entity[o[n]],t=0,e=C.groupnames.length;t<e;t++)s(C.group[C.groupnames[t]].entitys,o[n]);return C},C.pathDeleteEntity=function(t){},C.newVector=function(t){return C.makeVector(t)},C.newPad=function(t){return C.makePad(t)},C.newCell=function(t){return C.makeCell(t)},C.newContext=function(t){return C.makeContext(t)},C.newGroup=function(t){return C.makeGroup(t)},C.newGradient=function(t){return C.makeGradient(t)},C.newRadialGradient=function(t){return C.makeRadialGradient(t)},C.makeVector=function(t){return new C.Vector(t)},C.makePad=function(t){return new C.Pad(t)},C.makeCell=function(t){return new C.Cell(t)},C.makeContext=function(t){return new C.Context(t)},C.makeGroup=function(t){return new C.Group(t)},C.makeGradient=function(t){return new C.Gradient(t)},C.makeRadialGradient=function(t){return new C.RadialGradient(t)},C.setPerspectives=function(){},C.Vector=function(t){return t=C.safeObject(t),this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.name=t.name||"generic",this},C.Vector.prototype=Object.create(Object.prototype),C.Vector.prototype.type="Vector",C.work.d.Vector={x:0,y:0,z:0,name:"generic"},C.Vector.prototype.setMagnitudeTo=function(t){return this.normalize(),this.scalarMultiply(t),this.getMagnitude()!==t&&(this.normalize(),this.scalarMultiply(t),this.getMagnitude()!==t&&(this.normalize(),this.scalarMultiply(t))),this},C.Vector.prototype.normalize=function(){var t=this.getMagnitude();return 0<t&&(this.x/=t,this.y/=t,this.z/=t),this},C.Vector.prototype.zero=function(){return this.x=0,this.y=0,this.z=0,this},C.Vector.prototype.set=function(t){t=C.safeObject(t);var e=C.xtGet;return this.x=e(t.x,this.x),this.y=e(t.y,this.y),this.z=e(t.z,this.z),this},C.Vector.prototype.isEqual=function(t){return!(!C.isa_vector(t)||this.x!==t.x||this.y!==t.y||this.z!==t.z)},C.Vector.prototype.isLike=function(t){return!(!C.isa_obj(t)||this.x!==t.x||this.y!==t.y||this.z!==t.z)},C.Vector.prototype.getData=function(){return{x:this.x,y:this.y,z:this.z}},C.Vector.prototype.hasCoordinates=function(t){return!!C.xta(t,t.x,t.y)},C.Vector.prototype.vectorAdd=function(t){return t=C.safeObject(t),this.x+=t.x||0,this.y+=t.y||0,this.z+=t.z||0,this},C.Vector.prototype.vectorSubtract=function(t){return t=C.safeObject(t),this.x-=t.x||0,this.y-=t.y||0,this.z-=t.z||0,this},C.Vector.prototype.vectorMultiply=function(t){return t=C.safeObject(t),this.x*=t.x||1,this.y*=t.y||1,this.z*=t.z||1,this},C.Vector.prototype.vectorDivide=function(t){return t=C.safeObject(t),this.x/=0!==(t.x||0)?t.x:1,this.y/=0!==(t.y||0)?t.y:1,this.z/=0!==(t.z||0)?t.z:1,this},C.Vector.prototype.scalarMultiply=function(t){return t.toFixed&&(this.x*=t,this.y*=t,this.z*=t),this},C.Vector.prototype.scalarDivide=function(t){return t.toFixed&&0!==t&&(this.x/=t,this.y/=t,this.z/=t),this},C.Vector.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},C.Vector.prototype.checkNotZero=function(){return!!(this.x||this.y||this.z)},C.Vector.prototype.getVector=function(){return C.makeVector({x:this.x,y:this.y,z:this.z})},C.Vector.prototype.getCrossProduct=function(t,e){var i,s,o,n;return C.isa_obj(t)?(i=(e=C.isa_obj(e)?e:this).x||0,s=e.y||0,o=e.z||0,n=t.x||0,e=t.y||0,t=t.z||0,C.makeVector({x:s*t-o*e,y:-i*t+o*n,z:i*e+s*n})):this},C.Vector.prototype.getDotProduct=function(t,e){return!!C.isa_obj(t)&&(e=C.isa_obj(e)?e:this,(t.x||0)*(e.x||0)+(t.y||0)*(e.y||0)+(t.z||0)*(e.z||0))},C.Vector.prototype.getTripleScalarProduct=function(t,e,i){var s,o,n,r,a,h;return!(!C.isa_obj(t)||!C.isa_obj(e))&&(i=C.isa_obj(i)?i:this,s=t.x||0,o=t.y||0,n=t.z||0,r=e.x||0,a=e.y||0,h=e.z||0,t=i.x||0,e=i.y||0,s*(a*(i=i.z||0)-h*e)+o*(-r*i+h*t)+n*(r*e-a*t))},C.Vector.prototype.rotate=function(t){var e=[0,0];return t.toFixed&&(e[0]=Math.atan2(this.y,this.x),e[0]+=.01745329251*t,e[1]=this.getMagnitude(),this.x=e[1]*Math.cos(e[0]),this.y=e[1]*Math.sin(e[0])),this},C.Vector.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},C.Vector.prototype.rotate3d=function(t,e){var i,s,o;return C.isa_quaternion(t)&&(o=C.work.workquat,e=e&&e.toFixed?e:this.getMagnitude(),i=o.q1.set(t),s=o.q2.set(this),t=o.q3.set(t).conjugate(),i.quaternionMultiply(s),i.quaternionMultiply(t),this.set(i.v).setMagnitudeTo(e)),this},C.Base=function(t){return t=C.safeObject(t),this.name=C.makeName({name:t.name,type:this.type,target:this.classname}),this},C.Base.prototype=Object.create(Object.prototype),C.Base.prototype.type="Base",C.Base.prototype.classname="objectnames",C.work.d.Base={comment:"",title:"",timestamp:""},C.Base.prototype.get=function(t){return C.xtGet(this[t],C.work.d[this.type][t])},C.Base.prototype.set=function(t){var e,i=C.work.d[this.type],s=C.xt;for(e in t)s(i[e])&&(this[e]=t[e]);return this},C.Base.prototype.clone=function(t){var e,i,s,o=C.mergeOver(this.parse(),C.safeObject(t));for(delete o.context,i=0,s=(e=Object.keys(this)).length;i<s;i++)C.isa_fn(this[e[i]])&&(o[e[i]]=this[e[i]]);return new C[this.type](o)},C.Base.prototype.parse=function(){return JSON.parse(JSON.stringify(this))},C.Base.prototype.numberConvert=function(t,e){var i=parseFloat(t)/100;if(isNaN(i))switch(t){case"right":case"bottom":return e;case"center":return e/2;default:return 0}return i*e},C.Device=function(){return this.name="scrawl_viewport",this.width=null,this.height=null,this.offsetX=null,this.offsetY=null,this.expectTouch=!1,this.canvas=!1,this.canvasGcoSourceIn=!1,this.canvasGcoSourceOut=!1,this.canvasGcoDestinationAtop=!1,this.canvasGcoDestinationIn=!1,this.canvasGcoCopy=!1,this.canvasEvenOddWinding=!1,this.canvasDashedLine=!1,this.getDeviceData(),this},C.Device.prototype=Object.create(C.Base.prototype),C.Device.prototype.type="Device",C.Device.prototype.classname="objectnames",C.work.d.Device={width:null,height:null,offsetX:null,offsetY:null,expectTouch:!1,canvas:!1,canvasEvenOddWinding:!1,canvasDashedLine:!1,canvasGcoSourceIn:!1,canvasGcoSourceOut:!1,canvasGcoDestinationAtop:!1,canvasGcoDestinationIn:!1,canvasGcoCopy:!1,video:!1,videoAutoplay:!1,videoForceFullScreen:!1},C.mergeInto(C.work.d.Device,C.work.d.Base),C.Device.prototype.getDeviceData=function(){this.checkCanvas(),this.canvas&&(this.checkCanvasEvenOddWinding(),this.checkCanvasDashedLine(),this.checkCanvasGco()),this.getViewportDimensions(),this.getViewportPosition(),this.getStacksDeviceData(),this.getImagesDeviceData(),this.checkTouch()},C.Device.prototype.checkTouch=function(){var t=!1;("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(t=!0),this.expectTouch=t},C.Device.prototype.checkCanvas=function(){var t=document.createElement("canvas").getContext("2d");this.canvas=!!t},C.Device.prototype.checkCanvasEvenOddWinding=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i="evenodd";t.width=10,t.height=10,e.beginPath(),e.moveTo(0,0),e.lineTo(10,0),e.lineTo(10,10),e.lineTo(0,10),e.lineTo(0,0),e.moveTo(3,3),e.lineTo(7,3),e.lineTo(7,7),e.lineTo(3,7),e.lineTo(3,3),e.moveTo(0,0),e.closePath(),e.mozFillRule=i,e.msFillRule=i,e.fill(i),e=e.getImageData(5,5,1,1),this.canvasEvenOddWinding=!e.data[3]},C.Device.prototype.checkCanvasDashedLine=function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i=[5,5];t.width=10,t.height=10,e.mozDash=i,e.lineDash=i;try{e.setLineDash(i)}catch(t){}e.lineWidth=10,e.beginPath(),e.moveTo(0,5),e.lineTo(10,5),e.stroke(),e=e.getImageData(8,5,1,1),this.canvasDashedLine=!e.data[3]},C.Device.prototype.checkCanvasGco=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=10,t.height=10,e.fillStyle="red",e.fillRect(3,0,4,10),e.globalCompositeOperation="source-in",e.fillStyle="blue",e.fillRect(0,3,10,4),t=e.getImageData(5,1,1,1),this.canvasGcoSourceIn=!t.data[3],e.globalCompositeOperation="source-over",e.clearRect(0,0,10,10),e.fillStyle="red",e.fillRect(3,0,4,10),e.globalCompositeOperation="source-out",e.fillStyle="blue",e.fillRect(0,3,10,4),t=e.getImageData(5,1,1,1),this.canvasGcoSourceOut=!t.data[3],e.globalCompositeOperation="source-over",e.clearRect(0,0,10,10),e.fillStyle="red",e.fillRect(3,0,4,10),e.globalCompositeOperation="destination-atop",e.fillStyle="blue",e.fillRect(0,3,10,4),t=e.getImageData(5,1,1,1),this.canvasGcoDestinationAtop=!t.data[3],e.globalCompositeOperation="source-over",e.clearRect(0,0,10,10),e.fillStyle="red",e.fillRect(3,0,4,10),e.globalCompositeOperation="destination-in",e.fillStyle="blue",e.fillRect(0,3,10,4),t=e.getImageData(5,1,1,1),this.canvasGcoDestinationIn=!t.data[3],e.globalCompositeOperation="source-over",e.clearRect(0,0,10,10),e.fillStyle="red",e.fillRect(3,0,4,10),e.globalCompositeOperation="copy",e.fillStyle="blue",e.fillRect(0,3,10,4),t=e.getImageData(5,1,1,1),this.canvasGcoCopy=!t.data[3]},C.Device.prototype.getViewportDimensions=function(t){var e,i;return t?(e=(t=C.device).width,i=t.height,t.width=document.documentElement.clientWidth-1,t.height=document.documentElement.clientHeight-1,e!=t.width||i!=t.height):(e=this.width,i=this.height,this.width=document.documentElement.clientWidth-1,this.height=document.documentElement.clientHeight-1,e!=this.width||i!=this.height)},C.Device.prototype.getViewportPosition=function(t){var e,i,s,o;return t?(o=C.device,e=C.xtGet,i=o.offsetX,s=o.offsetY,o.offsetX=e(t.pageX,t.target.offsetX,0),o.offsetY=e(t.pageY,t.target.offsetY,0),i!=o.offsetX||s!=o.offsetY):(o=document.documentElement,i=this.offsetX,s=this.offsetY,this.offsetX=(window.pageXOffset||o.scrollLeft)-(o.clientLeft||0),this.offsetY=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),i!=this.offsetX||s!=this.offsetY)},C.Device.prototype.getStacksDeviceData=function(){},C.Device.prototype.getImagesDeviceData=function(){},C.Device.prototype.isLandscape=function(){return!(this.width<this.height)},C.Device.prototype.isPortrait=function(){return this.width<this.height},C.Position=function(t){var e=C.safeObject,i=C.work.d[this.type],s=C.xtGet,o=C.makeVector;C.Base.call(this,t),t=e(t);var n=e(t.start);return this.start=o({x:s(t.startX,n.x,0),y:s(t.startY,n.y,0),name:this.type+"."+this.name+".start"}),this.currentStart=o({name:this.type+"."+this.name+".current.start"}),this.currentStart.flag=!1,n=e(t.handle),this.handle=o({x:s(t.handleX,n.x,0),y:s(t.handleY,n.y,0),name:this.type+"."+this.name+".handle"}),this.currentHandle=o({name:this.type+"."+this.name+".current.handle"}),this.currentHandle.flag=!1,this.maxDimensions={flag:!0,left:0,right:0,top:0,bottom:0},this.pivot=s(t.pivot,i.pivot),this.scale=s(t.scale,i.scale),this.roll=s(t.roll,i.roll),this.flipReverse=s(t.flipReverse,i.flipReverse),this.flipUpend=s(t.flipUpend,i.flipUpend),this.lockX=s(t.lockX,i.lockX),this.lockY=s(t.lockY,i.lockY),this.mouseIndex=s(t.mouseIndex,"mouse"),this.animationPositionInit(t),this.pathPositionInit(t),this},C.Position.prototype=Object.create(C.Base.prototype),C.Position.prototype.type="Position",C.Position.prototype.classname="objectnames",C.work.d.Position={start:{x:0,y:0},currentStart:{x:0,y:0},handle:{x:0,y:0},currentHandle:{x:0,y:0},maxDimensions:{flag:!0,left:0,right:0,top:0,bottom:0},pivot:null,scale:1,flipReverse:!1,flipUpend:!1,lockX:!1,lockY:!1,roll:0,mouseIndex:"mouse",width:0,height:0},C.mergeInto(C.work.d.Position,C.work.d.Base),C.Position.prototype.animationPositionInit=function(t){},C.Position.prototype.pathPositionInit=function(t){},C.Position.prototype.get=function(t){if(C.contains(["startX","startY","handleX","handleY"],t))switch(t){case"startX":return this.start.x;case"startY":return this.start.y;case"handleX":return this.handle.x;case"handleY":return this.handle.y}return this.animationPositionGet(t)||C.Base.prototype.get.call(this,t)},C.Position.prototype.getX=function(){return this.currentStart.x},C.Position.prototype.getY=function(){return this.currentStart.y},C.Position.prototype.animationPositionGet=function(t){return!1},C.Position.prototype.set=function(t){var e=C.xto;return t=C.safeObject(t),C.Base.prototype.set.call(this,t),e(t.start,t.startX,t.startY)&&this.setStart(t),e(t.handle,t.handleX,t.handleY)&&this.setHandle(t),e(t.flipUpend,t.flipReverse,t.scale,t.width,t.height,t.roll)&&(this.maxDimensions.flag=!0,e(t.scale,t.width,t.height)&&(this.currentHandle.flag=!1)),C.xt(t.pivot)&&(this.currentPivotIndex=!1),this.animationPositionSet(t),this},C.Position.prototype.setStart=function(t){var e=C.safeObject,i=C.xtGet,s=C.makeVector,o=C.isa_vector;return t=e(t),o(this.start)||(this.start=s(t.start||this.start),this.start.name=this.type+"."+this.name+".start"),e=e(t.start),this.start.x=i(t.startX,e.x,this.start.x),this.start.y=i(t.startY,e.y,this.start.y),o(this.currentStart)||(this.currentStart=s({name:this.type+"."+this.name+".current.start"})),this.currentStart.flag=!1,this.maxDimensions.flag=!0,this},C.Position.prototype.setHandle=function(t){var e=C.safeObject,i=C.xtGet,s=C.makeVector,o=C.isa_vector;return t=e(t),o(this.handle)||(this.handle=s(t.handle||this.handle),this.handle.name=this.type+"."+this.name+".handle"),e=e(t.handle),this.handle.x=i(t.handleX,e.x,this.handle.x),this.handle.y=i(t.handleY,e.y,this.handle.y),o(this.currentHandle)||(this.currentHandle=s({name:this.type+"."+this.name+".current.handle"})),this.currentHandle.flag=!1,this.maxDimensions.flag=!0,this},C.Position.prototype.animationPositionSet=function(t){},C.Position.prototype.updateStart=function(t){},C.Position.prototype.revertStart=function(t){},C.Position.prototype.reverse=function(t){},C.Position.prototype.setDeltaAttribute=function(t){},C.Position.prototype.setDelta=function(t){var e=C.xto;return e((t=C.safeObject(t)).start,t.startX,t.startY)&&this.setDeltaStart(t),C.Position.prototype.pathPositionSetDelta.call(this,t),e(t.handle,t.handleX,t.handleY)&&this.setDeltaHandle(t),e(t.scale,t.width,t.height,t.roll)&&(t.scale&&this.setDeltaScale(t),t.roll&&this.setDeltaRoll(t),t.width&&this.setDeltaWidth(t),t.height&&this.setDeltaHeight(t),this.maxDimensions.flag=!0,e(t.scale,t.width,t.height)&&(this.currentHandle.flag=!1)),this},C.Position.prototype.setDeltaStart=function(t){var e,i=C.safeObject,s=C.xtGet,o=C.addPercentages;return t=i(t),e=i(t.start),i=s(t.startX,e.x,0),e=s(t.startY,e.y,0),this.start.x=this.start.x.toFixed?this.start.x+i:o(this.start.x,i),this.start.y=this.start.y.toFixed?this.start.y+e:o(this.start.y,e),this.currentStart.flag=!1,this},C.Position.prototype.setDeltaHandle=function(t){var e,i=C.safeObject,s=C.xtGet,o=C.addPercentages;return t=i(t),e=i(t.handle),i=s(t.handleX,e.x,0),e=s(t.handleY,e.y,0),this.handle.x=this.handle.x.toFixed?this.handle.x+i:o(this.handle.x,i),this.handle.y=this.handle.y.toFixed?this.handle.y+e:o(this.handle.y,e),this.currentHandle.flag=!1,this},C.Position.prototype.setDeltaScale=function(t){return t=C.safeObject(t),this.scale+=t.scale||0,this},C.Position.prototype.setDeltaRoll=function(t){return t=C.safeObject(t),this.roll+=t.roll||0,this},C.Position.prototype.setDeltaWidth=function(t){t=(t=C.safeObject(t)).width||0;return this.width=this.width.toFixed?this.width+t:C.addPercentages(this.width,t),this},C.Position.prototype.setDeltaHeight=function(t){t=(t=C.safeObject(t)).height||0;return this.height=this.height.toFixed?this.height+t:C.addPercentages(this.height,t),this},C.Position.prototype.pathPositionSetDelta=function(t){},C.Position.prototype.clone=function(t){var e,i,s=C.safeObject,o=C.makeVector,n=C.xtGet;return t=s(t),i=C.Base.prototype.clone.call(this,t),e=s(t.start),i.start=o({x:n(t.startX,e.x,i.start.x),y:n(t.startY,e.y,i.start.y),name:i.type+"."+i.name+".start"}),e=s(t.handle),i.handle=o({x:n(t.handleX,e.x,i.handle.x),y:n(t.handleY,e.y,i.handle.y),name:i.type+"."+i.name+".handle"}),i=this.animationPositionClone(i,t)},C.Position.prototype.animationPositionClone=function(t,e){return t},C.Position.prototype.getReferenceDimensions={Pad:function(t){return{w:t.localWidth,h:t.localHeight,c:!1}},Cell:function(t){return{w:t.actualWidth,h:t.actualHeight,c:!1}},Block:function(t){var e=t.scale;return{w:t.localWidth/e,h:t.localHeight/e,c:!1}},Wheel:function(t){return{w:t.width,h:t.height,c:!0}},Phrase:function(t){return{w:t.width,h:t.height,c:!1}},Picture:function(t){var e=t.scale,t=t.pasteData;return{w:t.w/e,h:t.h/e,c:!1}},Path:function(t){return{w:t.width,h:t.height,c:!t.isLine}},Shape:function(t){return{w:t.width,h:t.height,c:!t.isLine}},Frame:function(t){return{w:t.width,h:t.height,c:!1}}},C.Position.prototype.updateCurrentHandle=function(){var t,e,i,s,o,n,r,a,h;return this.currentHandle.flag||(t=this.getReferenceDimensions[this.type](this),e=C.contains,i=this.numberConvert,o=["top","bottom","left","right","center"],n=(s=this.handle).x.substring,r=s.y.substring,a=this.currentHandle,h=this.scale||1,a.x=n?i(s.x,t.w):s.x,a.y=r?i(s.y,t.h):s.y,t.c&&(e(o,s.x)&&(a.x-=t.w/2),e(o,s.y)&&(a.y-=t.h/2)),n&&(a.x*=h),r&&(a.y*=h),isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a.reverse(),a.flag=!0),this},C.Position.prototype.updateCurrentStart=function(t){var e,i,s;if(!this.currentStart.flag&&t&&t.type){if(s=this.currentStart,e=this.getReferenceDimensions[t.type](t),i=this.numberConvert,t=this.start,s.x=t.x.substring?i(t.x,e.w):t.x,s.y=t.y.substring?i(t.y,e.h):t.y,isNaN(s.x)||isNaN(s.y))return s.x=0,s.y=0,this;s.flag=!0}return this},C.Position.prototype.setStampUsingPivot=function(t,e){var i,s,o,n,r,a,h=this.setStampUsingPivotCalculations;return this.currentPivotIndex||(a=this.pivot,o=C.point,n=C.entity,r=C.safeObject,"mouse"===a?s=!(i="mouse"):r(o)[a]?(i="point",s=o[a]):n[a]?(i="entity",s=n[a]):(a=C.xtGet(r(C.stack)[a],r(C.pad)[a],r(C.element)[a],!1))&&(i="stack",s=a),i&&(this.currentPivot=s,this.currentPivotIndex=i)),this.currentPivotIndex&&h[this.currentPivotIndex](this,this.currentPivot,t,e),this},C.Position.prototype.setStampUsingPivotCalculations={point:function(t,e){var i=C.entity[e.entity],s=t.currentStart,i=e.getCurrentCoordinates().rotate(i.roll).vectorAdd(i.currentStart);s.x=(t.lockX?s:i).x,s.y=(t.lockY?s:i).y},entity:function(t,e){var i="Particle"===e.type?e.get("place"):e.currentStart,e=t.currentStart;e.x=(t.lockX?e:i).x,e.y=(t.lockY?e:i).y},mouse:function(t,e,i,s){var o=t.currentStart;C.xt(s)||(i=C.cell[i],s=C.pad[i.pad].mice[t.mouseIndex]),(s=t.correctCoordinates(s,i))&&(null==t.oldX&&null==t.oldY&&(t.oldX=o.x,t.oldY=o.y),o.x=t.lockX?o.x:o.x+s.x-t.oldX,o.y=t.lockY?o.y:o.y+s.y-t.oldY,t.oldX=s.x,t.oldY=s.y)},stack:function(){}},C.Position.prototype.correctCoordinates=function(t,e){var i,s,o=C.xtGet;return t=C.safeObject(t),i=C.work.v.set(t),!!r.xta(t.x,t.y)&&(e=C.cell[e]||C.cell[C.pad[C.work.currentPad].base],t=o((s=C.pad[e.pad]).localWidth,s.width,300),s=o(s.localHeight,s.height,150),t!==e.actualWidth&&(i.x/=t/e.actualWidth),s!==e.actualHeight&&(i.y/=s/e.actualHeight),i)},C.PageElement=function(t){var e=C.xtGet,i=C.work.d[this.type];return t=C.safeObject(t),C.Base.call(this,t),this.width=e(t.width,i.width),this.height=e(t.height,i.height),this.scale=e(t.scale,i.scale),this.propogateTouch=e(t.propogateTouch,i.propogateTouch),this.setLocalDimensions(),this.stacksPageElementConstructor(t),this.mice={mouse:C.makeVector()},this.mice.mouse.id="mouse",this.mice.mouse.active=!1,this.mice.mouse.name=this.type+"."+this.name+".ui.mouse",this},C.PageElement.prototype=Object.create(C.Base.prototype),C.PageElement.prototype.type="PageElement",C.PageElement.prototype.classname="objectnames",C.work.d.PageElement={width:300,height:150,localWidth:300,localHeight:150,displayOffsetX:0,displayOffsetY:0,scale:1,mice:{},interactive:!0,propogateTouch:!1,position:"static"},C.mergeInto(C.work.d.PageElement,C.work.d.Base),C.PageElement.prototype.stacksPageElementConstructor=function(t){},C.PageElement.prototype.get=function(t){var e=this.getElement(),i=C.xtGet,s=C.work.d[this.type];if(C.contains(["width","height","position"],t))switch(t){case"width":return i(this.localWidth,parseFloat(e.width),s.width);case"height":return i(this.localHeight,parseFloat(e.height),s.height);case"position":return i(this.position,e.style.position)}return C.Base.prototype.get.call(this,t)},C.PageElement.prototype.set=function(t){var e=C.xt,i=C.xto;return t=C.safeObject(t),C.Base.prototype.set.call(this,t),i(t.width,t.height,t.scale)&&(this.setLocalDimensions(),this.setDimensions(),this.setDisplayOffsets()),e(t.position)&&(this.position=t.position),e(t.pivot)&&(this.pivot=t.pivot,this.pivot||(delete this.oldX,delete this.oldY)),e(t.mouse)&&this.initMouse(t.mouse),i(t.title,t.comment)&&this.setAccessibility(t),e(t.interactive)&&(this.interactive=t.interactive,this.removeMouseMove(),this.interactive&&this.addMouseMove()),this},C.PageElement.prototype.setAccessibility=function(t){var e,i=C.xt;return t=C.safeObject(t),e=this.getElement(),i(t.title)&&(this.title=t.title,e.title=this.title),i(t.comment)&&(this.comment=t.comment,e.setAttribute("data-comment",this.comment)),this},C.PageElement.prototype.setDisplayOffsets=function(){var t=this.getElement(),e=0,i=0;if(t.offsetParent)for(;e+=t.offsetLeft,i+=t.offsetTop,(t=t.offsetParent).offsetParent;);return this.displayOffsetX=e,this.displayOffsetY=i,this},C.PageElement.prototype.scaleDimensions=function(t){return t.toFixed&&(this.scale=t,this.setDimensions()),this},C.PageElement.prototype.setLocalDimensions=function(){var t=this.scale;return this.localWidth=this.width*t,this.localHeight=this.height*t,this},C.PageElement.prototype.setDimensions=function(){var t=this.getElement();return t.style.width=this.localWidth+"px",t.style.height=this.localHeight+"px",this},C.PageElement.prototype.getMouse=function(t){var e,i,s,o=[];if(C.xt(t)){if(C.xt(t)&&C.isa_bool(t)&&t)return this.mice;if(C.isa_event(t)){if(t.changedTouches){for(i=0,s=t.changedTouches.length;i<s;i++)e="t"+t.changedTouches[i].identifier,o.push(this.mice[e]);return o}return t.pointerType?(e="touch"!==t.pointerType?t.pointerType:"p"+t.pointerId,[this.mice[e]]):[this.mice.mouse]}return[this.mice.mouse]}return C.xtGet(this.mice.t0,this.mice.p1,this.mice.pen,this.mice.mouse)},C.PageElement.prototype.getMouseIdFromEvent=function(t){var e,i,s,o=[];if(C.isa_event(t))if(t.changedTouches)for(i=0,s=t.changedTouches.length;i<s;i++)e="t"+t.changedTouches[i].identifier,o.push(e);else t.pointerType?(e="touch"!==t.pointerType?t.pointerType:"p"+t.pointerId,o.push(e)):o.push("mouse");return o},C.PageElement.prototype.handleMouseMove=function(t){var e,i,s,o,n,r,a,h,c,l,u,p,d,y,f=C.pad,m=C.stack,g=C.element,v=C.work.activeListeners,x=C.xt,w=C.makeVector,k=this.id,b=x(k)?(o=f[k]||m[k]||g[k]||!1,this):(o=this).getElement();if(t.changedTouches)for(n=0,r=(c=t.changedTouches).length;n<r;n++){if(u="t"+c[n].identifier,"touchstart"===t.type)for(a=0,h=v.length;a<h;a++)(d=f[v[a]]||m[v[a]]||g[v[a]]||!1)&&delete d.mice[u];if(x(o.mice[u])||(o.mice[u]=w({name:o.type+"."+o.name+".t."+u}),o.mice[u].active=null,o.mice[u].id=u),c[n].pageX||c[n].pageY?(e=c[n].pageX,i=c[n].pageY):(c[n].clientX||c[n].clientY)&&(e=c[n].clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=c[n].clientY+document.body.scrollTop+document.documentElement.scrollTop),s=o.displayOffsetX+o.localWidth,l=o.displayOffsetY+o.localHeight,this.propogateTouch&&"touchmove"===t.type)for(a=0,h=v.length;a<h;a++)this.name!==v[a]&&(p=C.canvas[v[a]]||C.stk[v[a]]||C.elm[v[a]]||!1)&&C.triggerTouchFollow(t,p);l=e>=o.displayOffsetX&&e<=s&&i>=o.displayOffsetY&&i<=l,o.mice[u].active!==l&&(o.mice[u].active=l,"touchmove"!==t.type&&"touchfollow"!==t.type||(l?C.triggerTouchEnter(t,b):C.triggerTouchLeave(t,b))),o.mice[u].x=e-o.displayOffsetX,o.mice[u].y=i-o.displayOffsetY,"Pad"===o.type&&(o.mice[u].x=Math.round(o.mice[u].x/o.scale||1),o.mice[u].y=Math.round(o.mice[u].y/o.scale||1)),"touchup"!==t.type&&"touchleave"!==t.type||(o.mice[u].x=null,o.mice[u].y=null)}else t.pointerType?(y=t.target.id,u="touch"!==t.pointerType?t.pointerType:"p"+t.pointerId,x(o.mice[u])||(o.mice[u]=w({name:o.type+"."+o.name+".p."+u}),o.mice[u].active=null,o.mice[u].id=u),k=o.mice[u],y===o.name?(k.active=!1,0<=t.offsetX&&t.offsetX<=o.localWidth&&0<=t.offsetY&&t.offsetY<=o.localHeight&&(k.active=!0),k.x=Math.round(t.offsetX),k.y=Math.round(t.offsetY),"Pad"===o.type&&(k.x=Math.round(k.x/(o.scale||1)),k.y=Math.round(k.y/(o.scale||1)))):y&&t.target.parentNode.id===o.name&&(k.x=Math.round(t.pageX-o.displayOffsetX),k.y=Math.round(t.pageY-o.displayOffsetY),k.active=!1,0<=k.x&&k.x<=o.localWidth&&0<=k.y&&k.y<=o.localHeight&&(k.active=!0),"Pad"===o.type&&(k.x=Math.round(k.x/(o.scale||1)),k.y=Math.round(k.y/(o.scale||1))))):(x(o.mice.mouse)||(o.mice.mouse=w({name:o.type+"."+o.name+".ui.mouse"}),o.mice.mouse.active=null,o.mice.mouse.id="mouse"),t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),o.mice.mouse.active=!0,"mouseleave"===t.type&&(o.mice.mouse.active=!1),o.mice.mouse.x=e-o.displayOffsetX,o.mice.mouse.y=i-o.displayOffsetY,"Pad"===o.type&&(o.mice.mouse.x=Math.round(o.mice.mouse.x/(o.scale||1)),o.mice.mouse.y=Math.round(o.mice.mouse.y/(o.scale||1))));return o.handleMouseTilt(t),o},C.PageElement.prototype.pickupEntity=function(t){},C.PageElement.prototype.dropEntity=function(t){},C.PageElement.prototype.handleMouseTilt=function(t){},C.PageElement.prototype.addMouseMove=function(){var t=this.getElement();return C.addListener(["up","down","move","enter","leave"],this.handleMouseMove,t),this.propogateTouch&&C.pushUnique(C.work.activeListeners,this.name),this},C.PageElement.prototype.removeMouseMove=function(){var t=this.getElement();return C.removeListener(["up","down","move","enter","leave"],this.handleMouseMove,t),this.propogateTouch&&C.removeItem(C.work.activeListeners,this.name),this},C.Pad=function(t){var e=C.xtGet,i=C.work.d.Pad,s=C.pushUnique,o=C.makeCell;return t=C.safeObject(t),!!C.isa_canvas(t.canvasElement)&&(t.width=e(t.width,t.canvasElement.width,i.width),t.height=e(t.height,t.canvasElement.height,i.height),t.name=e(t.name,t.canvasElement.id,t.canvasElement.name,"Pad"),C.PageElement.call(this,t),this.name.match(/___/)&&(this.name=this.name.replace(/___/g,"_")),t.canvasElement.id=this.name,C.pad[this.name]=this,s(C.padnames,this.name),this.cells=[],i=o({name:this.name,pad:this.name,canvas:t.canvasElement,compiled:!1,shown:!1,width:this.localWidth,height:this.localHeight}),s(this.cells,i.name),this.display=i.name,(i=t.canvasElement.cloneNode(!0)).setAttribute("id",this.name+"_base"),i=o({name:this.name+"_base",pad:this.name,canvas:i,compileOrder:9999,shown:!1,width:"100%",height:"100%"}),s(this.cells,i.name),this.base=i.name,this.current=i.name,this.setDisplayOffsets(),this.setAccessibility(t),this.filtersPadInit(),this.padStacksConstructor(t),this.interactive=e(t.interactive,!0),this.interactive&&this.addMouseMove(),this.cellsCompileOrder=[].concat(this.cells),this.cellsShowOrder=[].concat(this.cells),this.resortCompile=!0,this.resortShow=!0,this)},C.Pad.prototype=Object.create(C.PageElement.prototype),C.Pad.prototype.type="Pad",C.Pad.prototype.classname="padnames",C.work.d.Pad={cells:[],display:"",base:"",current:""},C.mergeInto(C.work.d.Pad,C.work.d.PageElement),C.Pad.prototype.getElement=function(){return C.canvas[this.display]},C.Pad.prototype.filtersPadInit=function(t){},C.Pad.prototype.stacksPadInit=function(t){},C.Pad.prototype.set=function(t){var e,i=C.cell,s=C.xto;return C.PageElement.prototype.set.call(this,t),t=C.safeObject(t),e=i[this.display],i=i[this.base],s(t.scale,t.width,t.height)&&(e.set({pasteWidth:t.width?this.localWidth:e.pasteWidth,pasteHeight:t.height?this.localHeight:e.pasteHeight,scale:t.scale||e.scale}),i.set({scale:t.scale||i.scale})),this.padStacksSet(t),s(t.start,t.startX,t.startY,t.handle,t.handleX,t.handleY,t.scale,t.width,t.height)&&this.setDisplayOffsets(),s(t.backgroundColor,t.globalAlpha,t.globalCompositeOperation)&&i.set({backgroundColor:t.backgroundColor||i.backgroundColor,globalAlpha:t.globalAlpha||i.globalAlpha,globalCompositeOperation:t.globalCompositeOperation||i.globalCompositeOperation}),this},C.Pad.prototype.padStacksConstructor=function(){},C.Pad.prototype.padStacksSet=function(){},C.Pad.prototype.sortCellsCompile=function(){this.resortCompile&&(this.resortCompile=!1,this.cellsCompileOrder=C.bucketSort("cell","compileOrder",this.cellsCompileOrder))},C.Pad.prototype.sortCellsShow=function(){this.resortShow&&(this.resortShow=!1,this.cellsShowOrder=C.bucketSort("cell","showOrder",this.cellsShowOrder))},C.Pad.prototype.clear=function(){for(var t,e=this.cells,i=C.cell,s=0,o=e.length;s<o;s++)(t=i[e[s]]).rendered&&t.cleared&&t.clear();return this},C.Pad.prototype.compile=function(t){var e,i,s,o=C.cell,n=this.cellsCompileOrder;for(this.sortCellsCompile(),i=0,s=n.length;i<s;i++)(e=o[n[i]]).rendered&&e.compiled&&e.compile(t);return this},C.Pad.prototype.show=function(){var t,e,i,s=C.cell,o=this.cellsShowOrder,n=s[this.display],r=s[this.base];for(this.sortCellsShow(),e=0,i=o.length;e<i;e++)(t=s[o[e]]).rendered&&t.shown&&r.copyCellToSelf(t);return n.copyCellToSelf(r,!0),this},C.Pad.prototype.render=function(t){return this.clear(),this.compile(t),this.show(),this},C.Pad.prototype.addNewCell=function(t){var e,i=C.pushUnique;return!!(t=C.safeObject(t)).name.substring&&(t.width=Math.round(t.width)||this.width,t.height=Math.round(t.height)||this.height,(e=document.createElement("canvas")).setAttribute("id",t.name),e.setAttribute("height",t.height),e.setAttribute("width",t.width),t.pad=this.name,t.canvas=e,t=C.makeCell(t),i(this.cells,t.name),i(this.cellsCompileOrder,t.name),i(this.cellsShowOrder,t.name),this.resortCompile=!0,this.resortShow=!0,t)},C.Pad.prototype.addCells=function(){for(var t=C.pushUnique,e=Array.prototype.slice.call(arguments),i=0,s=(e=Array.isArray(e[0])?e[0]:e).length;i<s;i++)C.cell[e[i]]&&(t(this.cells,e[i]),t(this.cellsCompileOrder,e[i]),t(this.cellsShowOrder,e[i]));return this.resortCompile=!0,this.resortShow=!0,this},C.Pad.prototype.deleteCell=function(t){var e=C.removeItem;return t.substring&&(e(this.cells,t),e(this.cellsCompileOrder,t),e(this.cellsShowOrder,t),this.display===t&&(this.display=this.current),this.base===t&&(this.base=this.current),this.current===t&&(this.current=this.base),this.resortCompile=!0,this.resortShow=!0),this},C.Pad.prototype.makeCurrent=function(){return C.work.currentPad=this.name,this},C.Pad.prototype.setAccessibility=function(t){var e,i=C.xt;return t=C.safeObject(t),e=this.getElement(),i(t.title)&&(this.title=t.title,e.title=this.title),i(t.comment)&&(this.comment=t.comment,e.setAttribute("data-comment",this.comment),e.innerHTML="<p>"+this.comment+"</p>"),this},C.Pad.prototype.setDimensions=function(){var t=this.getElement();return t.width=this.localWidth,t.height=this.localHeight,this},C.Cell=function(t){return t=C.safeObject(t),!!C.xta(t,t.canvas)&&(this.coreCellInit(t),this.animationCellInit(t),this.collisionsCellInit(t),this.filtersCellInit(t),this)},C.Cell.prototype=Object.create(C.Position.prototype),C.Cell.prototype.type="Cell",C.Cell.prototype.classname="cellnames",C.work.d.Cell={pad:"",copy:{x:0,Y:0},copyWidth:300,copyHeight:150,copyData:!1,pasteData:!1,pasteWidth:300,pasteHeight:150,actualWidth:300,actualHeight:150,fieldLabel:"",globalAlpha:1,globalCompositeOperation:"source-over",backgroundColor:"rgba(0,0,0,0)",context:"",groups:[],rendered:!0,cleared:!0,compiled:!0,shown:!0,compileOrder:0,showOrder:0},C.mergeInto(C.work.d.Cell,C.work.d.Position),C.Cell.prototype.coreCellInit=function(t){var e,i,s=C.work.d.Cell,o=C.xt,n=C.xto,r=C.xtGet,a=C.makeVector;C.Position.call(this,t),C.Base.prototype.set.call(this,t),C.canvas[this.name]=t.canvas,i=C.canvas[this.name],C.context[this.name]=t.canvas.getContext("2d"),C.cell[this.name]=this,C.pushUnique(C.cellnames,this.name),this.pad=r(t.pad,!1),e=C.safeObject(t.copy),this.copy=a({x:r(t.copyX,e.x,0),y:r(t.copyY,e.y,0),name:this.type+"."+this.name+".copy"}),this.actualWidth=i.width,this.actualHeight=i.height,this.copyWidth=this.actualWidth,this.copyHeight=this.actualHeight,this.copyData={x:0,y:0,w:0,h:0},this.pasteData={x:0,y:0,w:0,h:0},this.pasteWidth=this.actualWidth,this.pasteHeight=this.actualHeight,this.setDimensions(t),n(t.pasteX,t.pasteY)&&(this.start.x=r(t.pasteX,this.start.x),this.start.y=r(t.pasteY,this.start.y)),n(t.copyWidth,t.copyHeight,t.pasteWidth,t.pasteHeight,t.width,t.height)&&(this.copyWidth=r(t.copyWidth,t.width,this.copyWidth),this.copyHeight=r(t.copyHeight,t.height,this.copyHeight),this.pasteWidth=r(t.pasteWidth,t.width,this.pasteWidth),this.pasteHeight=r(t.pasteHeight,t.height,this.pasteHeight)),n=C.makeContext({name:this.name,cell:C.context[this.name]}),this.context=n.name,this.flipUpend=r(t.flipUpend,s.flipUpend),this.flipReverse=r(t.flipReverse,s.flipReverse),this.lockX=r(t.lockX,s.lockX),this.lockY=r(t.lockY,s.lockY),this.roll=r(t.roll,s.roll),this.rendered=r(t.rendered,!0),this.cleared=r(t.cleared,!0),this.compiled=r(t.compiled,!0),this.shown=r(t.shown,!0),this.compileOrder=r(t.compileOrder,0),this.showOrder=r(t.showOrder,0),this.backgroundColor=r(t.backgroundColor,"rgba(0,0,0,0)"),this.globalCompositeOperation=r(t.globalCompositeOperation,"source-over"),this.globalAlpha=r(t.globalAlpha,1),this.groups=o(t.groups)?[].concat(t.groups):[],this.sortGroups=!0,C.makeGroup({name:this.name,cell:this.name}),this.setCopy(),this.setPaste()},C.Cell.prototype.collisionsCellInit=function(t){},C.Cell.prototype.filtersCellInit=function(t){},C.Cell.prototype.animationCellInit=function(t){},C.Cell.prototype.get=function(t){var e=C.contains;if(e(["pasteX","pasteY","copyX","copyY"],t))switch(t){case"pasteX":return this.start.x;case"pasteY":return this.start.y;case"copyX":return this.copy.x;case"copyY":return this.copy.y}if(e(["paste","copy"],t))switch(t){case"paste":return this.start.getVector();case"copy":return this.copy.getVector()}if(e(["width","height"],t))switch(t){case"width":return this.actualWidth;case"height":return this.actualHeight}return this.animationCellGet(t)||C.Position.prototype.get.call(this,t)},C.Cell.prototype.animationCellGet=function(t){return!1},C.Cell.prototype.set=function(t){var e=C.xt,i=C.xto;return C.Position.prototype.set.call(this,t),i((t=C.safeObject(t)).paste,t.pasteX,t.pasteY)&&this.setPasteVector(t,!1),i(t.copy,t.copyX,t.copyY)&&this.setCopyVector(t),i(t.copyWidth,t.width)&&this.setCopyWidth(t),i(t.copyHeight,t.height)&&this.setCopyHeight(t),i(t.pasteWidth,t.width)&&this.setPasteWidth(t,!1),i(t.pasteHeight,t.height)&&this.setPasteHeight(t,!1),i(t.actualWidth,t.width)&&this.setActualWidth(t,!1),i(t.actualHeight,t.height)&&this.setActualHeight(t,!1),i(t.actualWidth,t.actualHeight,t.width,t.height)&&(this.setDimensions(t),C.ctx[this.context].getContextFromEngine(C.context[this.name])),i(t.actualWidth,t.actualHeight,t.pasteWidth,t.pasteHeight,t.width,t.height,t.handle,t.handleX,t.handleY,t.scale)&&this.setDirtyHandles(),i(t.handle,t.handleX,t.handleY,t.scale)&&this.setDirtyHandles(),i(t.start,t.startX,t.startY,t.paste,t.pasteX,t.pasteY)&&this.setDirtyStarts(),this.animationCellSet(t),e(t.compileOrder)&&(C.pad[this.pad].resortCompile=!0),e(t.showOrder)&&(C.pad[this.pad].resortShow=!0),t.resolve&&(this.setCopy(),this.setPaste()),this},C.Cell.prototype.setDirtyStarts=function(){for(var t,e=C.group,i=this.groups,s=0,o=i.length;s<o;s++)e[t=i[s]]&&e[t].setDirtyStarts();return this.currentStart.flag=!1,this},C.Cell.prototype.setDirtyHandles=function(){for(var t,e=C.group,i=this.groups,s=0,o=i.length;s<o;s++)e[t=i[s]]&&e[t].setDirtyHandles();return this.currentHandle.flag=!1,this},C.Cell.prototype.setActualHeight=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),this.actualHeight=i(t.actualHeight,t.height,this.actualHeight),e&&(this.setDimensions(t),C.ctx[this.context].getContextFromEngine(C.context[this.name]),this.setDirtyHandles()),this},C.Cell.prototype.setActualWidth=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),this.actualWidth=i(t.actualWidth,t.width,this.actualWidth),e&&(this.setDimensions(t),C.ctx[this.context].getContextFromEngine(C.context[this.name]),this.setDirtyHandles()),this},C.Cell.prototype.setPasteHeight=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),this.pasteHeight=i(t.pasteHeight,t.height,this.pasteHeight),e&&this.setDirtyHandles(),this},C.Cell.prototype.setPasteWidth=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),this.pasteWidth=i(t.pasteWidth,t.width,this.pasteWidth),e&&this.setDirtyHandles(),this},C.Cell.prototype.setCopyHeight=function(t){var e=C.xtGet;return t=C.safeObject(t),this.copyHeight=e(t.copyHeight,t.height,this.copyHeight),this},C.Cell.prototype.setCopyWidth=function(t){var e=C.xtGet;return t=C.safeObject(t),this.copyWidth=e(t.copyWidth,t.width,this.copyWidth),this},C.Cell.prototype.setPasteVector=function(t,e){var i=C.xtGet,s=C.safeObject,o=this.start;return t=s(t),e=i(e,!0),s=s(t.paste),o.x=i(t.pasteX,s.x,o.x),o.y=i(t.pasteY,s.y,o.y),e&&this.setDirtyStarts(),this},C.Cell.prototype.setCopyVector=function(t){var e=C.xtGet,i=C.safeObject,s=this.copy;return t=i(t),i=i(t.copy),s.x=e(t.copyX,i.x,s.x),s.y=e(t.copyY,i.y,s.y),this},C.Cell.prototype.animationCellSet=function(t){},C.Cell.prototype.setDelta=function(t){var e=C.xt,i=C.xto;return C.Position.prototype.setDelta.call(this,t),i((t=C.safeObject(t)).copy,t.copyX,t.copyY)&&this.setDeltaCopy(t),i(t.paste,t.pasteX,t.pasteY)&&this.setDeltaPaste(t,!1),e(t.copyWidth)&&this.setDeltaCopyWidth(t),e(t.copyHeight)&&this.setDeltaCopyHeight(t),i(t.pasteWidth,t.width)&&this.setDeltaPasteWidth(t,!1),i(t.pasteHeight,t.height)&&this.setDeltaPasteHeight(t,!1),i(t.actualWidth,t.width)&&this.setDeltaActualWidth(t,!1),i(t.actualHeight,t.height)&&this.setDeltaActualHeight(t,!1),e(t.roll)&&this.setDeltaRoll(t),e(t.globalAlpha)&&this.setDeltaGlobalAlpha(t),i(t.actualWidth,t.width,t.actualHeight,t.height)&&(this.setDimensions(t),C.ctx[this.context].getContextFromEngine(C.context[this.name])),i(t.actualWidth,t.actualHeight,t.pasteWidth,t.pasteHeight,t.width,t.height,t.handle,t.handleX,t.handleY,t.scale)&&this.setDirtyHandles(),i(t.start,t.startX,t.startY,t.paste,t.pasteX,t.pasteY)&&this.setDirtyStarts(),t.resolve&&(this.setCopy(),this.setPaste()),this},C.Cell.prototype.setDeltaGlobalAlpha=function(t){return t=C.safeObject(t),this.globalAlpha+=t.globalAlpha||0,this},C.Cell.prototype.setDeltaRoll=function(t){return t=C.safeObject(t),this.roll+=t.roll||0,this},C.Cell.prototype.setDeltaActualHeight=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),i=i(t.actualHeight,t.height),this.actualHeight=i.toFixed?this.actualHeight+i:this.actualHeight,e&&(this.setDimensions(t),C.ctx[this.context].getContextFromEngine(C.context[this.name]),this.setDirtyHandles()),this},C.Cell.prototype.setDeltaActualWidth=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),i=i(t.actualWidth,t.width),this.actualWidth=i.toFixed?this.actualWidth+i:this.actualWidth,e&&(this.setDimensions(t),C.ctx[this.context].getContextFromEngine(C.context[this.name]),this.setDirtyHandles()),this},C.Cell.prototype.setDeltaPasteHeight=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),t=i(t.pasteHeight,t.height),this.pasteHeight=this.pasteHeight.toFixed?this.pasteHeight+t:C.addPercentages(this.pasteHeight,t),e&&this.setDirtyHandles(),this},C.Cell.prototype.setDeltaCopyHeight=function(t){return t=C.safeObject(t),this.copyHeight=this.copyHeight.toFixed?this.copyHeight+t.copyHeight:C.addPercentages(this.copyHeight,t.copyHeight),this},C.Cell.prototype.setDeltaPasteWidth=function(t,e){var i=C.xtGet;return t=C.safeObject(t),e=i(e,!0),t=i(t.pasteWidth,t.width),this.pasteWidth=this.pasteWidth.toFixed?this.pasteWidth+t:C.addPercentages(this.pasteWidth,t),e&&this.setDirtyHandles(),this},C.Cell.prototype.setDeltaCopyWidth=function(t){return t=C.safeObject(t),this.copyWidth=this.copyWidth.toFixed?this.copyWidth+t.copyWidth:C.addPercentages(this.copyWidth,t.copyWidth),this},C.Cell.prototype.setDeltaPaste=function(t,e){var i,s=C.safeObject,o=C.xtGet,n=C.addPercentages,r=this.start;return t=s(t),e=C.xtGet(e,!0),i=s(t.paste),s=o(t.pasteX,i.x,0),i=o(t.pasteY,i.y,0),r.x=this.start.x.toFixed?r.x+s:n(r.x,s),r.y=this.start.y.toFixed?r.y+i:n(r.y,i),e&&this.setDirtyStarts(),this},C.Cell.prototype.setDeltaCopy=function(t){var e,i=C.safeObject,s=C.xtGet,o=C.addPercentages,n=this.copy;return t=i(t),e=i(t.copy),i=s(t.copyX,e.x,0),e=s(t.copyY,e.y,0),n.x=i.toFixed?n.x+i:o(n.x,i),n.y=e.toFixed?n.y+e:o(n.y,e),this},C.Cell.prototype.setEngine=function(t){var e,i,s,o,n,r=C.ctx,a=this.setEngineActions,h=["Gradient","RadialGradient","Pattern"];if(!t.fastStamp&&(e=r[this.context],s=r[t.context].getChanges(t,e),0<Object.keys(s).length))for(var c in i=C.context[this.name],n=t.name,o=this.name,s)a[c](s[c],i,h,n,o),e[c]=s[c];return t},C.Cell.prototype.setEngineActions={fillStyle:function(t,e,i,s,o){var n,r;r=C.xt(C.design[t])?(n=C.design[t],C.contains(i,n.type)&&n.update(s,o),n.getData()):t,e.fillStyle=r},font:function(t,e){e.font=t},globalAlpha:function(t,e){e.globalAlpha=t},globalCompositeOperation:function(t,e){e.globalCompositeOperation=t},lineCap:function(t,e){e.lineCap=t},lineDash:function(t,e){e.mozDash=t,e.lineDash=t,e.setLineDash&&e.setLineDash(t)},lineDashOffset:function(t,e){e.mozDashOffset=t,e.lineDashOffset=t},lineJoin:function(t,e){e.lineJoin=t},lineWidth:function(t,e){e.lineWidth=t},shadowBlur:function(t,e){e.shadowBlur=t},shadowColor:function(t,e){e.shadowColor=t},shadowOffsetX:function(t,e){e.shadowOffsetX=t},shadowOffsetY:function(t,e){e.shadowOffsetY=t},strokeStyle:function(t,e,i,s,o){var n,r;r=C.xt(C.design[t])?(n=C.design[t],C.contains(i,n.type)&&n.update(s,o),n.getData()):t,e.strokeStyle=r},miterLimit:function(t,e){e.miterLimit=t},textAlign:function(t,e){e.textAlign=t},textBaseline:function(t,e){e.textBaseline=t},winding:function(t,e){e.mozFillRule=t,e.msFillRule=t}},C.Cell.prototype.groupSort=function(){this.sortGroups&&(this.sortGroups=!1,this.groups=C.bucketSort("group","order",this.groups))},C.Cell.prototype.clear=function(){var t=this.actualWidth,e=this.actualHeight,i=this.backgroundColor,s=C.context[this.name],o=C.ctx[this.context];return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t,e),"rgba(0,0,0,0)"!==i&&(s.fillStyle=i,s.fillRect(0,0,t,e),o.fillStyle=i),this},C.Cell.prototype.compile=function(t){var e,i,s;for(this.groupSort(),i=0,s=this.groups.length;i<s;i++)(e=C.group[this.groups[i]]).visibility&&e.stamp(!1,this.name,this,t);return this},C.Cell.prototype.rotateDestination=function(t){var e,i=this.flipReverse?-1:1,s=this.flipUpend?-1:1,o=this.addPathRoll?this.roll+this.pathRoll:this.roll,n=this.pasteData;return o?(o*=.01745329251,e=Math.cos(o),o=Math.sin(o),t.setTransform(e*i,o*i,-o*s,e*s,n.x,n.y)):t.setTransform(i,0,0,s,n.x,n.y),this},C.Cell.prototype.prepareToCopyCell=function(t){this.pasteData;return this.pivot?this.setStampUsingPivot(C.pad[this.pad].base):this.pathPrepareToCopyCell(),this.setCopy(),this.setPaste(),this.rotateDestination(t),this},C.Cell.prototype.pathPrepareToCopyCell=function(){},C.Cell.prototype.setCopy=function(){var t=C.isBetween,e=this.copyData,i=this.copy,s=this.numberConvert,o=Math.floor,n=this.copyWidth,r=this.copyHeight,a=this.actualWidth,h=this.actualHeight;return e.x=i.x.substring?s(i.x,a):i.x,e.y=i.y.substring?s(i.y,h):i.y,t(e.x,0,a-1,!0)||(e.x=e.x<0?0:a-1),t(e.y,0,h-1,!0)||(e.y=e.y<0?0:h-1),e.w=n.substring?s(n,a):n,e.h=r.substring?s(r,h):r,t(e.w,1,a,!0)||(e.w=e.w<1?1:a),t(e.h,1,h,!0)||(e.h=e.h<1?1:h),e.x+e.w>a&&(e.x=a-e.w),e.y+e.h>h&&(e.y=h-e.h),e.x=o(e.x),e.y=o(e.y),e.w=o(e.w),e.h=o(e.h),this},C.Cell.prototype.setReference=function(){var t=C.safeObject,e=C.cell,i=t(C.pad[this.pad]),s=t(e[i.display]),o=t(e[i.base]),n=!i.base,r=this.name===i.base,t=this.name===i.display,e=!i.display;this.reference=e?i:!n&&(r?s:t?i:o)},C.Cell.prototype.setPaste=function(){var t=C.safeObject,e=C.cell,i=t(C.pad[this.pad]),s=t(e[i.display]),o=t(e[i.base]),n=!!C.xt(i.group),r=this.name===i.base,a=Math.floor,h=this.numberConvert,c=this.scale,l=this.pasteData,u=this.currentStart,t=C.xtGet;return C.xta(s,o)&&(e=this.name===i.base?s.actualWidth:t(o.actualWidth,this.actualWidth,300),o=this.name===i.base?s.actualHeight:t(o.actualHeight,this.actualHeight,150),u.flag||(this.reference||this.setReference(),this.updateCurrentStart(this.reference)),l.x=u.x,l.y=u.y,l.w=this.pasteWidth,l.w.substring&&(l.w=h(l.w,e)),r&&n||(l.w*=c),l.h=this.pasteHeight,l.h.substring&&(l.h=h(l.h,o)),r&&n||(l.h*=c),l.w<1&&(l.w=1),l.h<1&&(l.h=1),l.x=a(l.x),l.y=a(l.y),l.w=a(l.w),l.h=a(l.h)),this},C.Cell.prototype.copyCellToSelf=function(t){var e,i,s,o;return t=t.substring?C.cell[t]:t,C.xt(t)&&(e=C.context[this.name],o=C.ctx[this.name],s=C.context[t.name],i=C.canvas[t.name],t.globalAlpha!==o.globalAlpha&&(e.globalAlpha=t.globalAlpha,o.globalAlpha=t.globalAlpha),t.globalCompositeOperation!==o.globalCompositeOperation&&(e.globalCompositeOperation=t.globalCompositeOperation,o.globalCompositeOperation=t.globalCompositeOperation),s.setTransform(1,0,0,1,0,0),(o=t.currentHandle).flag||t.updateCurrentHandle(),t.prepareToCopyCell(e),s=t.copyData,t=t.pasteData,e.drawImage(i,s.x,s.y,s.w,s.h,o.x,o.y,t.w,t.h)),this},C.Cell.prototype.clearShadow=function(t){var e=C.ctx[this.context];return t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,this},C.Cell.prototype.restoreShadow=function(t,e){var i=C.ctx,s=i[this.context],e=i[e];return t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.shadowBlur=e.shadowBlur,s.shadowOffsetX=e.shadowOffsetX,s.shadowOffsetY=e.shadowOffsetY,s.shadowBlur=e.shadowBlur,this},C.Cell.prototype.setToClearShape=function(){var t=C.context[this.name],e=C.ctx[this.context];return t.fillStyle="rgba(0, 0, 0, 0)",t.strokeStyle="rgba(0, 0, 0, 0)",t.shadowColor="rgba(0, 0, 0, 0)",e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle="rgba(0, 0, 0, 0)",e.shadowColor="rgba(0, 0, 0, 0)",this},C.Cell.prototype.setDimensions=function(t){var e=C.pad[this.pad],i=C.canvas[this.name],s=C.xtGet(t.width,t.actualWidth,this.actualWidth),t=C.xtGet(t.height,t.actualHeight,this.actualHeight);return e&&(s.substring&&(s=parseFloat(s)/100*(e.localWidth/e.scale)),t.substring&&(t=parseFloat(t)/100*(e.localHeight/e.scale))),i.width=s,i.height=t,this.actualWidth=s,this.actualHeight=t,this},C.Cell.prototype.saveContext=function(){return C.context[this.name].save(),this},C.Cell.prototype.restoreContext=function(){return C.context[this.name].restore(),this},C.Cell.prototype.getImageData=function(t){var e=C.xtGet,i=(t=C.safeObject(t)).name&&t.name.substring?this.name+"_"+t.name:this.name+"_imageData",s=e(t.x,0),o=e(t.y,0),n=e(t.width,this.actualWidth),t=e(t.height,this.actualHeight);return C.imageData[i]=C.context[this.name].getImageData(s,o,n,t),i},C.Context=function(t){return t=C.safeObject(t),C.Base.call(this,t),t.cell?this.getContextFromEngine(t.cell):this.set(t),C.ctx[this.name]=this,C.pushUnique(C.ctxnames,this.name),this},C.Context.prototype=Object.create(C.Base.prototype),C.Context.prototype.type="Context",C.Context.prototype.classname="ctxnames",C.work.d.Context={fillStyle:"#000000",winding:"nonzero",strokeStyle:"#000000",globalAlpha:1,globalCompositeOperation:"source-over",lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0,0,0,0)",font:"10pt sans-serif",textAlign:"start",textBaseline:"alphabetic"},C.work.contextKeys=Object.keys(C.work.d.Context),C.mergeInto(C.work.d.Context,C.work.d.Base),C.Context.prototype.setDelta=function(t){var e=C.xt,i=C.work.d.Context;return e((t=C.safeObject(t)).lineDashOffset)&&(e(this.lineDashOffset)||(this.lineDashOffset=i.lineDashOffset+t.lineDashOffset),this.lineDashOffset+=t.lineDashOffset),e(t.lineWidth)&&(e(this.lineWidth)||(this.lineWidth=i.lineWidth+t.lineWidth),this.lineWidth+=t.lineWidth,this.lineWidth<0&&(this.lineWidth=0)),e(t.globalAlpha)&&(e(this.globalAlpha)||(this.globalAlpha=i.globalAlpha+t.globalAlpha),this.globalAlpha+=t.globalAlpha,C.isBetween(this.globalAlpha,0,1,!0)||(this.globalAlpha=.5<this.globalAlpha?1:0)),this},C.Context.prototype.getContextFromEngine=function(t){for(var e=C.work.contextKeys,i=C.xtGet,s=0,o=e.length;s<o;s++)this[e[s]]=t[e[s]];return this.winding=i(t.mozFillRule,t.msFillRule,"nonzero"),this.lineDash=C.xt(t.lineDash)?t.lineDash:[],this.lineDashOffset=i(t.mozDashOffset,t.lineDashOffset,0),this},C.Context.prototype.getNonDefaultAttributes=function(){for(var t=C.work.d.Context,e=C.xt,i=C.work.contextKeys,s={},o=0,n=i.length;o<n;o++)"lineDash"===i[o]&&this.lineDash&&0<this.lineDash.length?s.lineDash=this.lineDash:e(this[i[o]])&&this[i[o]]!=t[i[o]]&&(s[i[o]]=this[i[o]]);return s},C.Context.prototype.getChanges=function(t,e){for(var i,s,o=e.getNonDefaultAttributes(),n=Object.keys(o),r=this.getNonDefaultAttributes(),a=Object.keys(r),h=C.work.d.Context,c={},l=C.contains,u=0,p=n.length;u<p;u++)l(a,n[u])||(c[n[u]]=h[n[u]]);for(u=0,p=a.length;u<p;u++)"lineWidth"===a[u]&&t.scaleOutline?r.lineWidth*t.scale!==o.lineWidth&&(c.lineWidth=r.lineWidth*t.scale):r[a[u]]!=o[a[u]]?c[a[u]]=r[a[u]]:l(["fillStyle","strokeStyle","shadowColor"],a[u])&&((i=C.design[r[a[u]]])&&"Color"===i.type?(s=i.getData())!==o[a[u]]&&(c[a[u]]=s):"shadowColor"!=a[u]&&i&&i.autoUpdate&&(c[a[u]]=r[a[u]]));return c},C.Group=function(t){var e=C.xtGet,i=C.pushUnique;return t=C.safeObject(t),C.Base.call(this,t),this.entitys=C.xt(t.entitys)?[].concat(t.entitys):[],this.cell=t.cell||C.pad[C.work.currentPad].current,this.order=e(t.order,0),this.resort=!0,this.visibility=e(t.visibility,!0),this.entitySort=e(t.entitySort,!0),this.regionRadius=e(t.regionRadius,0),C.group[this.name]=this,i(C.groupnames,this.name),i(C.cell[this.cell].groups,this.name),this},C.Group.prototype=Object.create(C.Base.prototype),C.Group.prototype.type="Group",C.Group.prototype.classname="groupnames",C.work.d.Group={entitys:[],cell:"",order:0,visibility:!0,entitySort:!0,resort:!1,regionRadius:0},C.mergeInto(C.work.d.Group,C.work.d.Base),C.Group.prototype.set=function(t){return C.Base.prototype.set.call(this,t),C.xt(t.order)&&(C.cell[this.cell].sortGroups=!0),this},C.Group.prototype.sortEntitys=function(t){(t||this.entitySort&&this.resort)&&(this.resort=!1,this.entitys=C.bucketSort("entity","order",this.entitys))},C.Group.prototype.forceStamp=function(t,e,i,s){var o=this.visibility;return this.visibility=!0,this.stamp(t,e,i,s),this.visibility=o,this},C.Group.prototype.stamp=function(t,e,i,s){var o,n,r,a,h=C.entity;if(this.visibility)for(this.sortEntitys(),n=this.entitys,i=C.xt(i)?i:C.cell[e],r=0,a=n.length;r<a;r++)(o=h[n[r]])&&(o.group=this.name,o.stamp(t,e,i,s));return this},C.Group.prototype.addEntitysToGroup=function(){for(var t,e=[],i=C.pushUnique,s=this.entitys,o=C.xt,n=0,r=arguments.length;n<r;n++)o(arguments[n])&&(Array.isArray(arguments[n])?e=e.concat(arguments[n]):Array.isArray(arguments[n][0])?e=e.concat(arguments[n][0]):e.push(arguments[n]));for(n=0,r=e.length;n<r;n++)t=e[n],C.xt(t)&&(t.substring?i(s,t):C.xt(t.name)&&i(s,t.name));return this.resort=!0,this},C.Group.prototype.removeEntitysFromGroup=function(){for(var t,e=[],i=C.removeItem,s=this.entitys,o=C.xt,n=0,r=arguments.length;n<r;n++)o(arguments[n])&&(Array.isArray(arguments[n])?e=e.concat(arguments[n]):Array.isArray(arguments[n][0])?e=e.concat(arguments[n][0]):e.push(arguments[n]));for(n=0,r=e.length;n<r;n++)t=e[n],C.xt(t)&&(t.substring?i(s,t):C.xt(t.name)&&i(s,t.name));return this.resort=!0,this},C.Group.prototype.updateEntitysBy=function(t){var e,i,s=this.entitys,o=C.entity,n=C.xt;for(n((t=C.safeObject(t)).x)&&(t.startX=t.x),n(t.y)&&(t.startY=t.y),e=0,i=s.length;e<i;e++)o[s[e]].setDelta(t);return this},C.Group.prototype.setEntitysTo=function(t){for(var e=this.entitys,i=0,s=e.length;i<s;i++)C.entity[e[i]].set(t);return this},C.Group.prototype.pivotEntitysTo=function(t){var e,i,s,o,n,r,a=this.entitys,h=C.entity,c=C.work.v,l={pivot:0,handleX:0,handleY:0};if((t=!!t.substring&&t)&&(e=h[t]||C.point[t]||!1))for(i="Point"===e.type?e.local:e.start,n=0,r=a.length;n<r;n++)s=h[a[n]],(o=c.set(s.start)).vectorSubtract(i),l.pivot=t,l.handleX=-o.x,l.handleY=-o.y,s.set(l);return this},C.Group.prototype.getEntityAt=function(t){var e,i,s,o=C.work.colv1,n=C.work.colv2,r=this.entitys,a=C.entity,h=this.regionRadius;for(t=C.safeObject(t),i=o.set(t),i=C.Position.prototype.correctCoordinates(i,this.cell),this.sortEntitys(),s=r.length-1;0<=s;s--)if(e=a[r[s]],!(h&&(n.set(e.currentStart).vectorSubtract(i),n.getMagnitude()>h))&&e.checkHit(i))return e;return!1},C.Group.prototype.getEntitysByMouseIndex=function(t){var e,i,s,o=[],n=this.entitys,r=C.entity;if(t.substring)for(e=0,i=n.length;e<i;e++)(s=r[n[e]]).mouseIndex===t&&o.push(s);return o},C.Group.prototype.getAllEntitysAt=function(t){var e,i,s,o,n=C.work.colv1,r=C.work.colv2,a=this.entitys,h=C.entity,c=this.regionRadius;for(t=C.safeObject(t),i=n.set(t),s=[],i=C.Position.prototype.correctCoordinates(i,this.cell),this.sortEntitys(),o=a.length-1;0<=o;o--)e=h[a[o]],c&&(r.set(e.currentStart).vectorSubtract(i),r.getMagnitude()>c)||e.checkHit(i)&&s.push(e);return 0<s.length&&s},C.Group.prototype.setDirtyStarts=function(){for(var t,e=C.entity,i=this.entitys,s=C.xt,o=0,n=i.length;o<n;o++)s(t=e[i[o]])&&(t.currentStart.flag=!1);return this},C.Group.prototype.setDirtyHandles=function(){for(var t,e=C.entity,i=this.entitys,s=C.xt,o=0,n=i.length;o<n;o++)s(t=e[i[o]])&&(t.currentHandle.flag=!1);return this},C.Entity=function(t){var e=C.xtGet;t=C.safeObject(t),C.Position.call(this,t),t.name=this.name;var i=C.makeContext(t);return this.context=i.name,this.group=this.getGroup(t),this.fastStamp=e(t.fastStamp,!1),this.scaleOutline=e(t.scaleOutline,!0),this.order=e(t.order,0),this.visibility=e(t.visibility,!0),this.method=e(t.method,C.work.d[this.type].method),this.collisionsEntityConstructor(t),this.filtersEntityInit(t),this},C.Entity.prototype=Object.create(C.Position.prototype),C.Entity.prototype.type="Entity",C.Entity.prototype.classname="entitynames",C.work.d.Entity={order:0,visibility:!0,method:"fill",data:"",radius:0,scaleOutline:!0,fastStamp:!1,context:"",group:""},C.mergeInto(C.work.d.Entity,C.work.d.Position),C.Entity.prototype.filtersEntityInit=function(t){},C.Entity.prototype.collisionsEntityConstructor=function(t){},C.Entity.prototype.registerInLibrary=function(t){return C.entity[this.name]=this,C.pushUnique(C.entitynames,this.name),C.group[this.group].addEntitysToGroup(this.name),this.collisionsEntityRegisterInLibrary(t),this},C.Entity.prototype.collisionsEntityRegisterInLibrary=function(){},C.Entity.prototype.get=function(t){var e=C.xt,i=C.work.d;return e(i.Base[t])?C.Base.prototype.get.call(this,t):e(i.Context[t])?C.ctx[this.context].get(t):C.Position.prototype.get.call(this,t)},C.Entity.prototype.set=function(t){var e=C.group,i=C.xt;C.xto;return C.Position.prototype.set.call(this,t),C.ctx[this.context].set(t),i((t=C.safeObject(t)).group)&&t.group!==this.group&&(e[this.group].removeEntitysFromGroup(this.name),this.group=this.getGroup(t.group),e[this.group].addEntitysToGroup(this.name)),this.collisionsEntitySet(t),i(t.order)&&(e[this.group].resort=!0),i(t.lineWidth)&&(this.maxDimensions.flag=!0),this},C.Entity.prototype.collisionsEntitySet=function(){},C.Entity.prototype.setDelta=function(t){return C.Position.prototype.setDelta.call(this,t),t=C.safeObject(t),C.xto(t.lineDashOffset,t.lineWidth,t.globalAlpha)&&(C.ctx[this.context].setDelta(t),C.xt(t.lineWidth)&&(this.maxDimensions.flag=!0)),this.collisionsEntitySetDelta(t),this},C.Entity.prototype.collisionsEntitySetDelta=function(){},C.Entity.prototype.clone=function(t){var e;return t=C.safeObject(t),delete(e=JSON.parse(JSON.stringify(C.ctx[this.context]))).name,delete(e=C.mergeInto(t,e)).context,e=C.Position.prototype.clone.call(this,e),C.xt(t.createNewContext)&&!t.createNewContext&&(delete C.ctx[e.context],C.removeItem(C.ctxnames,e.context),e.context=this.context),e},C.Entity.prototype.getGroup=function(t){return t=C.safeObject(t),C.xt(t.group)&&C.group[t.group]?t.group:C.pad[C.work.currentPad].current},C.Entity.prototype.getEntityCell=function(t){return C.cell[C.group[this.getGroup(t)].cell]},C.Entity.prototype.forceStamp=function(t,e,i,s){var o=this.visibility;return this.visibility=!0,this.stamp(t,e,i,s),this.visibility=o,this},C.Entity.prototype.stamp=function(t,e,i,s){var o,n=!this.currentStart.flag,r=!this.currentHandle.flag;return this.visibility&&(i||(e=(i=C.cell[e]||C.cell[C.group[this.group].cell]).name),o=C.context[e],t=t||this.method,(n||r)&&(n&&this.updateCurrentStart(i),r&&this.updateCurrentHandle(),this.resetCollisionPoints()),this.pivot?(this.setStampUsingPivot(e,s),this.maxDimensions.flag=!0):this.pathStamp(),this[t](o,e,i),this.stampFilter(o,e,i)),this},C.Entity.prototype.resetCollisionPoints=function(){},C.Entity.prototype.pathStamp=function(){},C.Entity.prototype.stampFilter=function(){},C.Entity.prototype.stampFilterDimensionsActions={},C.Entity.prototype.rotateCell=function(t,e){var i,s=this.flipReverse?-1:1,o=this.flipUpend?-1:1,n=this.addPathRoll?this.roll+this.pathRoll:this.roll,r=this.currentStart;return n?(n*=.01745329251,i=Math.cos(n),n=Math.sin(n),t.setTransform(i*s,n*s,-n*o,i*o,r.x,r.y)):t.setTransform(s,0,0,o,r.x,r.y),this},C.Entity.prototype.getStartValues=function(){var t=this.currentStart;return{x:t.x,y:t.y}},C.Entity.prototype.getHandleValues=function(){var t=this.currentHandle;return{x:t.x,y:t.y}},C.Entity.prototype.getStart=function(){var t=C.work.v.set(this.currentStart).vectorAdd(this.currentHandle);return{x:t.x,y:t.y}},C.Entity.prototype.clear=function(t,e,i){return this},C.Entity.prototype.clearWithBackground=function(t,e,i){return this},C.Entity.prototype.draw=function(t,e,i){return this},C.Entity.prototype.fill=function(t,e,i){return this},C.Entity.prototype.drawFill=function(t,e,i){return this},C.Entity.prototype.fillDraw=function(t,e,i){return this},C.Entity.prototype.sinkInto=function(t,e,i){return this},C.Entity.prototype.floatOver=function(t,e,i){return this},C.Entity.prototype.clip=function(t,e,i){return this},C.Entity.prototype.none=function(t,e,i){return i.setEngine(this),this},C.Entity.prototype.clearShadow=function(t,e){var i=C.ctx[this.context];return(i.shadowOffsetX||i.shadowOffsetY||i.shadowBlur)&&e.clearShadow(t),this},C.Entity.prototype.restoreShadow=function(t,e){var i=C.ctx[this.context];return(i.shadowOffsetX||i.shadowOffsetY||i.shadowBlur)&&e.restoreShadow(t,this.context),this},C.Entity.prototype.pickupEntity=function(t){var e,i;return t=C.safeObject(t),i=C.work.v.set(t),e=C.cell[C.group[this.group].cell],i=this.correctCoordinates(i,e),this.oldX=i.x||0,this.oldY=i.y||0,this.oldPivot=this.pivot,this.mouseIndex=C.xtGet(t.id||"mouse"),this.pivot="mouse",this.currentPivotIndex=!1,this.order+=9999,C.group[this.group].resort=!0,this},C.Entity.prototype.dropEntity=function(t){return this.pivot=C.xtGet(t,this.oldPivot,null),this.currentPivotIndex=!1,this.order=9999<=this.order?this.order-9999:0,delete this.oldPivot,delete this.oldX,delete this.oldY,this.mouseIndex="mouse",C.group[this.group].resort=!0,this.start.x=this.currentStart.x,this.start.y=this.currentStart.y,this.currentHandle.flag=!1,this.setPaste&&this.setPaste(),this},C.Entity.prototype.checkHit=function(t){var e,i,s,o=[],n=this.currentHandle,r=this.localWidth,a=this.localHeight,h=this.scale,c=C.work.cvx;for(t=C.safeObject(t),C.xt(t.tests)?o=t.tests:(o.length=0,o.push(t.x||0),o.push(t.y||0)),this.rotateCell(c,this.getEntityCell().name),n.flag||this.updateCurrentHandle(),n=n,r=r||this.width*h,h=a||this.height*h,c.beginPath(),c.rect(n.x,n.y,r,h),i=0,s=o.length;i<s&&!(e=c.isPointInPath(o[i],o[i+1]));i+=2);return!!e&&(t.x=o[i],t.y=o[i+1],t)},C.Design=function(t){return C.Base.call(this,t),this.lockTo=C.xtGet(t.lockTo,C.work.d[this.type].lockTo),this},C.Design.prototype=Object.create(C.Base.prototype),C.Design.prototype.type="Design",C.Design.prototype.classname="designnames",C.work.d.Design={color:[{color:"black",stop:0},{color:"white",stop:.999999}],lockTo:"cell",autoUpdate:!1,cell:"",startX:0,startY:0,endX:0,endY:0},C.mergeInto(C.work.d.Design,C.work.d.Base),C.Design.prototype.set=function(t){var e,i=C.xt,s=C.xto,o=C.safeObject,n=C.xtGet;return s((t=C.safeObject(t)).startX,t.startY,t.startRadius,t.start)&&(e=o(t.start),this.startX=n(e.x,e.startX,t.startX,this.startX),this.startY=n(e.y,e.startY,t.startY,this.startY),this.startRadius=n(e.r,e.startRadius,t.startRadius,this.startRadius)),s(t.endX,t.endY,t.endRadius,t.end)&&(e=o(t.end),this.endX=n(e.x,e.endX,t.endX,this.endX),this.endY=n(e.y,e.endY,t.endY,this.endY),this.endRadius=n(e.r,e.endRadius,t.endRadius,this.endRadius)),t.shift&&i(C.work.d.Design.shift)&&(this.shift=t.shift),i(t.autoUpdate)&&(this.autoUpdate=t.autoUpdate),i(t.color)&&(this.color=[].concat(t.color)),this},C.Design.prototype.setDelta=function(t){var e,i=C.addPercentages;return(t=C.safeObject(t)).startX&&(e=this.get("startX"),this.startX=t.startX.substring?i(e,t.startX):e+t.startX),t.startY&&(e=this.get("startY"),this.startY=t.startY.substring?i(e,t.startY):e+t.startY),t.startRadius&&(e=this.get("startRadius"),this.startRadius=e+t.startRadius),t.endX&&(e=this.get("endX"),this.endX=t.endX.substring?i(e,t.endX):e+t.endX),t.endY&&(e=this.get("endY"),this.endY=t.endY.substring?i(e,t.endY):e+t.endY),t.endRadius&&(e=this.get("endRadius"),this.endRadius=e+t.endRadius),t.shift&&C.xt(C.work.d.Design.shift)&&(e=this.get("shift"),this.shift=e+t.shift),this},C.Design.prototype.update=function(t,e){return this.makeGradient(t,e),this.applyStops(),this},C.Design.prototype.getData=function(){return C.xt(C.dsn[this.name])?C.dsn[this.name]:"rgba(0,0,0,0)"},C.Design.prototype.makeGradient=function(t,e){var i,s,o,n,r,a,h,c,l,u,p,d,y,f=C.cell,m=C.xt,g=C.work.v;if(t=C.entity[t]||!1,e=m(e)?f[e]||f[this.get("cell")]:t?f[t.group]:f[this.get("cell")],i=C.context[e.name],this.lockTo&&"cell"!==this.lockTo){switch(u=t.currentHandle,t.type){case"Wheel":o=-u.x+t.radius*t.scale,n=-u.y+t.radius*t.scale;break;case"Shape":case"Path":n=t.isLine?(o=-u.x,-u.y):(o=-u.x+t.width/2*t.scale,-u.y+t.height/2*t.scale);break;default:o=-u.x,n=-u.y}p=m(t.localWidth)?t.localWidth:t.width*t.scale,d=m(t.localHeight)?t.localHeight:t.height*t.scale,(h=m(this.startX)?this.startX:0).substring&&(h=parseFloat(h)/100*p),(c=m(this.startY)?this.startY:0).substring&&(c=parseFloat(c)/100*d),(l=m(this.endX)?this.endX:p).substring&&(l=parseFloat(l)/100*p),(y=m(this.endY)?this.endY:d).substring&&(y=parseFloat(y)/100*d),s="Gradient"===this.type?i.createLinearGradient(h-o,c-n,l-o,y-n):((r=m(this.startRadius)?this.startRadius:0).substring&&(r=parseFloat(r)/100*p),(a=m(this.endRadius)?this.endRadius:p).substring&&(a=parseFloat(a)/100*p),i.createRadialGradient(h-o,c-n,r,l-o,y-n,a))}else f=t.numberConvert,d=e.actualWidth,p=e.actualHeight,(o=t.start.x).substring&&(o=f(o,d)),(n=t.start.y).substring&&(n=f(n,p)),(h=m(this.startX)?this.startX:0).substring&&(h=f(h,d)),(c=m(this.startY)?this.startY:0).substring&&(c=f(c,p)),(l=m(this.endX)?this.endX:d).substring&&(l=f(l,d)),(y=m(this.endY)?this.endY:p).substring&&(y=f(y,p)),o=t.flipReverse?d-o:o,n=t.flipUpend?p-n:n,h=(h=t.flipReverse?d-h:h)-o,c=(c=t.flipUpend?p-c:c)-n,l=(l=t.flipReverse?d-l:l)-o,p=(y=t.flipUpend?p-y:y)-n,y=t.roll,(t.flipReverse&&t.flipUpend||!t.flipReverse&&!t.flipUpend)&&(y=-t.roll),t.roll&&(g.set({x:h,y:c,z:0}).rotate(y),h=g.x,c=g.y,g.set({x:l,y:p,z:0}).rotate(y),l=g.x,p=g.y),s="Gradient"===this.type?i.createLinearGradient(h,c,l,p):((r=m(this.startRadius)?this.startRadius:0).substring&&(r=parseFloat(r)/100*e.actualWidth),(a=m(this.endRadius)?this.endRadius:e.actualWidth).substring&&(a=parseFloat(a)/100*e.actualWidth),i.createRadialGradient(h,c,r,l,p,a));return C.dsn[this.name]=s,this},C.Design.prototype.applyStops=function(){var t,e,i=this.get("color"),s=C.dsn[this.name];if(s)for(t=0,e=i.length;t<e;t++)s.addColorStop(i[t].stop,i[t].color);return this},C.Design.prototype.remove=function(){return delete C.dsn[this.name],delete C.design[this.name],C.removeItem(C.designnames,this.name),!0},C.Gradient=function(t){return t=C.safeObject(t),C.Design.call(this,t),C.Base.prototype.set.call(this,t),C.design[this.name]=this,C.pushUnique(C.designnames,this.name),this},C.Gradient.prototype=Object.create(C.Design.prototype),C.Gradient.prototype.type="Gradient",C.Gradient.prototype.classname="designnames",C.work.d.Gradient={},C.mergeInto(C.work.d.Gradient,C.work.d.Design),C.RadialGradient=function(t){return t=C.safeObject(t),C.Design.call(this,t),C.Base.prototype.set.call(this,t),C.design[this.name]=this,C.pushUnique(C.designnames,this.name),this},C.RadialGradient.prototype=Object.create(C.Design.prototype),C.RadialGradient.prototype.type="RadialGradient",C.RadialGradient.prototype.classname="designnames",C.work.d.RadialGradient={startRadius:0,endRadius:0},C.mergeInto(C.work.d.RadialGradient,C.work.d.Design),C.work.v=C.makeVector({name:"scrawl.v"}),C.work.colv1=C.makeVector({name:"scrawl.colv1"}),C.work.colv2=C.makeVector({name:"scrawl.colv2"}),C.makeAnimation=function(t){return new C.Animation(t)},C.newAnimation=function(t){return C.makeAnimation(t)},C.work.animate=[],C.work.doAnimation=!1,C.work.orderAnimations=!0,C.work.resortAnimations=!0,C.animationLoop=function(){var t,e,i=C.work.animate,s=C.animation;for(C.work.orderAnimations&&C.sortAnimations(),t=0,e=i.length;t<e;t++)i[t]&&s[i[t]].fn();C.work.doAnimation&&window.requestAnimFrame(function(){C.animationLoop()})},C.sortAnimations=function(){C.work.resortAnimations&&(C.work.resortAnimations=!1,C.work.animate=C.bucketSort("animation","order",C.work.animate))},C.animationInit=function(){C.makeAnimation({name:"viewportMasterAnimation",fn:function(){var t=C.device,e=t.getViewportDimensions(),t=t.getViewportPosition();e&&C.setPerspectives(),(e||t)&&C.setDisplayOffsets("all")}}),C.work.doAnimation=!0,C.animationLoop()},C.Animation=function(t){var e;return C.Base.call(this,t),t=C.safeObject(t),e=!!C.isa_bool(t.delay)&&t.delay,this.fn=t.fn||function(){},this.order=t.order||0,C.animation[this.name]=this,C.pushUnique(C.animationnames,this.name),C.work.resortAnimations=!0,e||this.run(),this},C.Animation.prototype=Object.create(C.Base.prototype),C.Animation.prototype.type="Animation",C.Animation.prototype.classname="animationnames",C.work.d.Animation={fn:function(){},order:0},C.mergeInto(C.work.d.Animation,C.work.d.Base),C.Animation.prototype.run=function(){return C.pushUnique(C.work.animate,this.name),!0},C.Animation.prototype.isRunning=function(){return C.contains(C.work.animate,this.name)},C.Animation.prototype.halt=function(){return C.removeItem(C.work.animate,this.name),!0},C.Animation.prototype.kill=function(){return delete C.animation[this.name],C.removeItem(C.animationnames,this.name),C.removeItem(C.work.animate,this.name),C.work.resortAnimations=!0},C.newBlock=function(t){return new C.Block(t)},C.makeBlock=function(t){return new C.Block(t)},C.Block=function(t){var e=C.xtGet,i=C.work.d.Block;return t=C.safeObject(t),C.Entity.call(this,t),C.Position.prototype.set.call(this,t),this.width=e(t.width,i.width),this.height=e(t.height,i.height),this.setLocalDimensions(),this.registerInLibrary(),C.pushUnique(C.group[this.group].entitys,this.name),this},C.Block.prototype=Object.create(C.Entity.prototype),C.Block.prototype.type="Block",C.Block.prototype.classname="entitynames",C.work.d.Block={localWidth:0,localHeight:0},C.mergeInto(C.work.d.Block,C.work.d.Entity),C.Block.prototype.set=function(t){return C.Entity.prototype.set.call(this,t),C.xto(t.width,t.height,t.scale)&&this.setLocalDimensions(),this},C.Block.prototype.setDelta=function(t){return C.Entity.prototype.setDelta.call(this,t),C.xto(t.width,t.height,t.scale)&&this.setLocalDimensions(),this},C.Block.prototype.setLocalDimensions=function(){var t=C.cell[C.group[this.group].cell];return this.width.substring?this.localWidth=parseFloat(this.width)/100*t.actualWidth*this.scale:this.localWidth=this.width*this.scale||0,this.height.substring?this.localHeight=parseFloat(this.height)/100*t.actualHeight*this.scale:this.localHeight=this.height*this.scale||0,this},C.Block.prototype.clip=function(t,e,i){var s=this.currentHandle;return this.rotateCell(t,i),t.beginPath(),t.rect(s.x,s.y,this.localWidth,this.localHeight),t.clip(),this},C.Block.prototype.clear=function(t,e,i){var s=this.currentHandle;return i.setToClearShape(),this.rotateCell(t,i),t.clearRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.clearWithBackground=function(t,e,i){var s=i.get("backgroundColor"),o=C.ctx[e],n=o.get("fillStyle"),r=o.get("strokeStyle"),e=o.get("globalAlpha"),o=this.currentHandle;return this.rotateCell(t,i),t.fillStyle=s,t.strokeStyle=s,t.globalAlpha=1,t.strokeRect(o.x,o.y,this.localWidth,this.localHeight),t.fillRect(o.x,o.y,this.localWidth,this.localHeight),t.fillStyle=n,t.strokeStyle=r,t.globalAlpha=e,this},C.Block.prototype.draw=function(t,e,i){var s=this.currentHandle;return i.setEngine(this),this.rotateCell(t,i),t.strokeRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.fill=function(t,e,i){var s=this.currentHandle;return i.setEngine(this),this.rotateCell(t,i),t.fillRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.drawFill=function(t,e,i){var s=this.currentHandle;return i.setEngine(this),this.rotateCell(t,i),t.strokeRect(s.x,s.y,this.localWidth,this.localHeight),this.clearShadow(t,i),t.fillRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.fillDraw=function(t,e,i){var s=this.currentHandle;return i.setEngine(this),this.rotateCell(t,i),t.fillRect(s.x,s.y,this.localWidth,this.localHeight),this.clearShadow(t,i),t.strokeRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.sinkInto=function(t,e,i){var s=this.currentHandle;return i.setEngine(this),this.rotateCell(t,i),t.fillRect(s.x,s.y,this.localWidth,this.localHeight),t.strokeRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.floatOver=function(t,e,i){var s=this.currentHandle;return i.setEngine(this),this.rotateCell(t,i),t.strokeRect(s.x,s.y,this.localWidth,this.localHeight),t.fillRect(s.x,s.y,this.localWidth,this.localHeight),this},C.Block.prototype.none=function(t,e,i){return this},C.Block.prototype.getMaxDimensions=function(t){var e=t.actualWidth,i=t.actualHeight,s=e/2,o=i/2,n=this.currentStart.x,r=this.currentStart.y,a=this.localWidth,h=this.localHeight,c=this.flipReverse,l=this.flipUpend,u=c?e-n:n,p=l?i-r:r,d=c?-a:a,y=l?-h:h,f=this.currentHandle,m=c?-f.x:f.x,g=l?-f.y:f.y,v=C.ctx[this.context].lineWidth||0,x=Math.ceil,w=Math.floor,k=this.roll,b=C.work.v,t=C.isBetween,n=c?u+m+d:u+m,r=c?u+m:u+m+d,a=l?p+g+y:p+g,h=l?p+g:p+g+y;return k&&(f=Math.min,c=Math.max,m={x:u,y:p},b.set({x:n,y:a}).vectorSubtract(m).rotate(k).vectorAdd(m),d=b.x,l=b.y,b.set({x:r,y:a}).vectorSubtract(m).rotate(k).vectorAdd(m),g=b.x,y=b.y,b.set({x:r,y:h}).vectorSubtract(m).rotate(k).vectorAdd(m),u=b.x,p=b.y,b.set({x:n,y:h}).vectorSubtract(m).rotate(k).vectorAdd(m),u=[d,g,b.x,u],p=[l,y,b.y,p],a=f.apply(Math,p),n=f.apply(Math,u),h=c.apply(Math,p),r=c.apply(Math,u)),a=w(a-v),n=w(n-v),h=x(h+v),r=x(r+v),t(a,0,i,!0)||(a=o<a?i:0),t(h,0,i,!0)||(h=o<h?i:0),t(n,0,e,!0)||(n=s<n?e:0),t(r,0,e,!0)||(r=s<r?e:0),this.maxDimensions.top=a,this.maxDimensions.bottom=h,this.maxDimensions.left=n,this.maxDimensions.right=r,this.maxDimensions.flag=!1,this.maxDimensions},C.work.d.Position.delta={x:0,y:0,z:0},C.work.d.Position.deltaPathPlace=0,C.work.d.Position.pathSpeedConstant=!0,C.work.d.Position.tweenLock=!1,C.mergeInto(C.work.d.Cell,C.work.d.Position),C.mergeInto(C.work.d.Entity,C.work.d.Position),C.xt(C.work.d.Block)&&C.mergeInto(C.work.d.Block,C.work.d.Entity),C.xt(C.work.d.Shape)&&C.mergeInto(C.work.d.Shape,C.work.d.Entity),C.xt(C.work.d.Wheel)&&C.mergeInto(C.work.d.Wheel,C.work.d.Entity),C.xt(C.work.d.Picture)&&C.mergeInto(C.work.d.Picture,C.work.d.Entity),C.xt(C.work.d.Phrase)&&C.mergeInto(C.work.d.Phrase,C.work.d.Entity),C.xt(C.work.d.Path)&&C.mergeInto(C.work.d.Path,C.work.d.Entity),C.work.d.PageElement.tweenLock=!1,C.mergeInto(C.work.d.Pad,C.work.d.PageElement),C.xt(C.work.d.Stack)&&C.mergeInto(C.work.d.Stack,C.work.d.PageElement),C.xt(C.work.d.Element)&&C.mergeInto(C.work.d.Element,C.work.d.PageElement),C.pushUnique(C.work.sectionlist,"tween"),C.pushUnique(C.work.nameslist,"tweennames"),C.convertTime=function(t){var e,i,s;if(C.xt(t)){if(t.toFixed)return["ms",t];switch(i=(e=t.match(/^\d+\.?\d*(\D*)/))[1].toLowerCase?e[1].toLowerCase():"ms"){case"s":s=1e3*parseFloat(t);break;case"%":s=parseFloat(t);break;default:i="ms",s=parseFloat(t)}return[i,s]}return!1},C.addWithinBounds=function(t,e){e=t+e;return 1<e?e-1:e<0?e+1:e},C.Position.prototype.animationPositionInit=function(t){var e=C.safeObject(t.delta),i=C.makeVector,s=C.xtGet,o=C.work.d[this.type];this.delta=i({name:this.type+"."+this.name+".delta",x:s(t.deltaX,e.x,0),y:s(t.deltaY,e.y,0)}),this.pathSpeedConstant=s(t.pathSpeedConstant,o.pathSpeedConstant),this.deltaPathPlace=s(t.deltaPathPlace,o.deltaPathPlace)},C.Position.prototype.animationPositionGet=function(t){if(C.contains(["deltaX","deltaY"],t))switch(t){case"deltaX":return this.delta.x;case"deltaY":return this.delta.y}return"delta"===t&&this.delta.getVector()},C.Position.prototype.animationPositionSet=function(t){C.xto(t.delta,t.deltaX,t.deltaY)&&this.setDeltaAttribute(t)},C.Position.prototype.setDeltaAttribute=function(t){var e=C.safeObject,i=C.xtGet;return t=e(t),C.isa_vector(this.delta)||(this.delta=C.makeVector(t.delta||this.delta)),e=e(t.delta),this.delta.x=i(t.deltaX,e.x,this.delta.x),this.delta.y=i(t.deltaY,e.y,this.delta.y),this},C.Position.prototype.animationPositionClone=function(t,e){var i=C.safeObject(e.delta),s=C.xtGet;return t.delta=C.makeVector({x:s(e.deltaX,i.x,t.delta.x),y:s(e.deltaY,i.y,t.delta.y)}),t},C.Position.prototype.updateStart=function(t){return t=C.xtGet(t,"all"),this.updateStartActions[t](C.addPercentages,this.start,this.delta,C.addWithinBounds,this),this.currentStart.flag=!1,C.xt(this.collisionArray)&&(this.collisionArray.length=0),this},C.Position.prototype.updateStartActions={x:function(t,e,i,s){e.x=e.x.toFixed?e.x+i.x:t(e.x,i.x)},y:function(t,e,i,s){e.y=e.y.toFixed?e.y+i.y:t(e.y,i.y)},path:function(t,e,i,s,o){o.pathPlace=s(o.pathPlace,o.deltaPathPlace)},all:function(t,e,i,s,o){o.deltaPathPlace&&(o.pathPlace=s(o.pathPlace,o.deltaPathPlace)),i.x&&(e.x=e.x.toFixed?e.x+i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y+i.y:t(e.y,i.y))}},C.Position.prototype.revertStart=function(t){return t=C.xtGet(t,"all"),this.revertStartActions[t](C.subtractPercentages,this.start,this.delta,C.addWithinBounds,this),this.currentStart.flag=!1,C.xt(this.collisionArray)&&(this.collisionArray.length=0),this},C.Position.prototype.revertStartActions={x:function(t,e,i,s){e.x=e.x.toFixed?e.x-i.x:t(e.x,i.x)},y:function(t,e,i,s){e.y=e.y.toFixed?e.y-i.y:t(e.y,i.y)},path:function(t,e,i,s,o){o.pathPlace=s(o.pathPlace,-o.deltaPathPlace)},all:function(t,e,i,s,o){o.deltaPathPlace&&(o.pathPlace=s(o.pathPlace,-o.deltaPathPlace)),i.x&&(e.x=e.x.toFixed?e.x-i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y-i.y:t(e.y,i.y))}},C.Position.prototype.exchange=function(t,e){var i;return C.isa_obj(t)&&(i=this[e]||this.get(e),this[e]=t[e]||t.get(e),t[e]=i),this},C.Position.prototype.reverse=function(t){return t=C.xtGet(t,"all"),this.reverseActions[t](this.delta,C.reversePercentage,this),this},C.Position.prototype.reverseActions={deltaX:function(t,e){t.x=t.x.toFixed?-t.x:e(t.x)},deltaY:function(t,e){t.y=t.y.toFixed?-t.y:e(t.y)},delta:function(t,e){t.x=t.x.toFixed?-t.x:e(t.x),t.y=t.y.toFixed?-t.y:e(t.y)},deltaPathPlace:function(t,e,i){i.deltaPathPlace=-i.deltaPathPlace},all:function(t,e,i){i.deltaPathPlace=-i.deltaPathPlace,t.x=t.x.toFixed?-t.x:e(t.x),t.y=t.y.toFixed?-t.y:e(t.y)}},C.work.d.Cell.copyDelta={x:0,y:0},C.work.d.Cell.copyMinWidth=0,C.work.d.Cell.copyMaxWidth=0,C.work.d.Cell.copyMinHeight=0,C.work.d.Cell.copyMaxHeight=0,C.Cell.prototype.animationCellInit=function(t){var e=C.safeObject(t.copyDelta),i=C.xtGet;this.copyDelta=C.makeVector({x:i(t.copyDeltaX,e.x,0),y:i(t.copyDeltaY,e.y,0)})},C.Cell.prototype.animationCellGet=function(t){if(C.contains(["copyDeltaX","copyDeltaY"],t))switch(t){case"copyDeltaX":return this.copyDelta.x;case"copyDeltaY":return this.copyDelta.y}return C.Base.prototype.get.call(this,t)},C.Cell.prototype.animationCellSet=function(t){var e,i=C.xtGet;C.xto(t.copyDelta,t.copyDeltaX,t.copyDeltaY)&&(e=C.safeObject(t.copyDelta),this.copyDelta.x=i(t.copyDeltaX,e.x,this.copyDelta.x),this.copyDelta.y=i(t.copyDeltaY,e.y,this.copyDelta.y))},C.Cell.prototype.updateStart=function(t){return t=C.xtGet(t,"all"),this.updateStartActions[t](C.addPercentages,this.start,this.delta,this.copy,this.copyDelta,C.addWithinBounds,this),this.currentStart.flag=!1,this},C.Cell.prototype.updateStartActions={x:function(t,e,i,s,o,n){i.x&&(e.x=e.x.toFixed?e.x+i.x:t(e.x,i.x)),o.x&&(s.x=s.x.toFixed?s.x+o.x:t(s.x,o.x))},y:function(t,e,i,s,o,n){i.y&&(e.y=e.y.toFixed?e.y+i.y:t(e.y,i.y)),o.y&&(s.y=s.y.toFixed?s.y+o.y:t(s.y,o.y))},start:function(t,e,i,s,o,n){i.x&&(e.x=e.x.toFixed?e.x+i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y+i.y:t(e.y,i.y))},paste:function(t,e,i,s,o,n){i.x&&(e.x=e.x.toFixed?e.x+i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y+i.y:t(e.y,i.y))},copy:function(t,e,i,s,o,n){o.x&&(s.x=s.x.toFixed?s.x+o.x:t(s.x,o.x)),o.y&&(s.y=s.y.toFixed?s.y+o.y:t(s.y,o.y))},path:function(t,e,i,s,o,n,r){r.pathPlace=n(r.pathPlace,r.deltaPathPlace)},all:function(t,e,i,s,o,n,r){r.deltaPathPlace&&(r.pathPlace=n(r.pathPlace,r.deltaPathPlace)),i.x&&(e.x=e.x.toFixed?e.x+i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y+i.y:t(e.y,i.y)),o.x&&(s.x=s.x.toFixed?s.x+o.x:t(s.x,o.x)),o.y&&(s.y=s.y.toFixed?s.y+o.y:t(s.y,o.y))}},C.Cell.prototype.revertStart=function(t){return t=C.xtGet(t,"all"),this.revertStartActions[t](C.subtractPercentages,this.start,this.delta,this.copy,this.copyDelta,C.addWithinBounds,this),this.currentStart.flag=!1,this},C.Cell.prototype.revertStartActions={x:function(t,e,i,s,o,n){i.x&&(e.x=e.x.toFixed?e.x-i.x:t(e.x,i.x)),o.x&&(s.x=s.x.toFixed?s.x-o.x:t(s.x,o.x))},y:function(t,e,i,s,o,n){i.y&&(e.y=e.y.toFixed?e.y-i.y:t(e.y,i.y)),o.y&&(s.y=s.y.toFixed?s.y-o.y:t(s.y,o.y))},start:function(t,e,i,s,o,n){i.x&&(e.x=e.x.toFixed?e.x-i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y-i.y:t(e.y,i.y))},paste:function(t,e,i,s,o,n){i.x&&(e.x=e.x.toFixed?e.x-i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y-i.y:t(e.y,i.y))},copy:function(t,e,i,s,o,n){o.x&&(s.x=s.x.toFixed?s.x-o.x:t(s.x,o.x)),o.y&&(s.y=s.y.toFixed?s.y-o.y:t(s.y,o.y))},path:function(t,e,i,s,o,n,r){r.pathPlace=n(r.pathPlace,-r.deltaPathPlace)},all:function(t,e,i,s,o,n,r){r.deltaPathPlace&&(r.pathPlace=n(r.pathPlace,-r.deltaPathPlace)),i.x&&(e.x=e.x.toFixed?e.x-i.x:t(e.x,i.x)),i.y&&(e.y=e.y.toFixed?e.y-i.y:t(e.y,i.y)),o.x&&(s.x=s.x.toFixed?s.x-o.x:t(s.x,o.x)),o.y&&(s.y=s.y.toFixed?s.y-o.y:t(s.y,o.y))}},C.Cell.prototype.zoom=function(t){var e,i,s,o,n,r,a,h,c,l,u,p;return t.toFixed&&(e=this.copyWidth,i=this.copyHeight,s=this.actualWidth,o=this.actualHeight,n=C.xtGet(this.copyMinWidth,this.copyWidth),r=C.xtGet(this.copyMinHeight,this.copyHeight),a=C.xtGet(this.copyMaxWidth,this.copyWidth),h=C.xtGet(this.copyMaxHeight,this.copyHeight),c=this.copy.x,l=this.copy.y,p=i+t,C.isBetween(u=e+t,n,a,!0)&&C.isBetween(p,r,h,!0)&&(e=u,i=p,l=(p=l-t/2)<0?0:o-i<p?o-i:p,this.copy.x=c=(t=c-t/2)<0?0:s-e<t?s-e:t,this.copy.y=l,this.copyWidth=e,this.copyHeight=i)),this},C.Cell.prototype.spliceCell=function(t){var e,i,s,o,n,r,a,h,c=C.work.cv,l=C.work.cvx;if(t=C.safeObject(t),C.contains(["horizontal","vertical","top","bottom","left","right"],t.edge)){switch(o=C.xtGet(t.shiftCopy,!1),n=this.actualHeight,r=this.actualWidth,a=C.context[this.name],h=C.canvas[this.name],c.width=r,c.height=n,a.setTransform(1,0,0,1,0,0),t.edge){case"horizontal":e=i=r/2,s="left";break;case"vertical":e=i=n/2,s="top";break;case"top":case"bottom":i=n-(e=C.xtGet(t.strip,20)),s=t.edge;break;case"left":case"right":i=r-(e=C.xtGet(t.strip,20)),s=t.edge}switch(s){case"top":l.drawImage(h,0,0,r,e,0,i,r,e),l.drawImage(h,0,e,r,i,0,0,r,i),this.copy.y-=o?e:0;break;case"bottom":l.drawImage(h,0,0,r,i,0,e,r,i),l.drawImage(h,0,i,r,e,0,0,r,e),this.copy.y+=o?e:0;break;case"left":l.drawImage(h,0,0,e,n,i,0,e,n),l.drawImage(h,e,0,i,n,0,0,i,n),this.copy.x-=o?e:0;break;case"right":l.drawImage(h,0,0,i,n,e,0,i,n),l.drawImage(h,i,0,e,n,0,0,e,n),this.copy.x+=o?e:0}a.clearRect(0,0,r,n),a.drawImage(c,0,0,r,n),o&&this.setCopy()}return this},C.Group.prototype.updateStart=function(t){for(var e=this.entitys,i=C.entity,s=0,o=e.length;s<o;s++)i[e[s]].updateStart(t);return this},C.Group.prototype.revertStart=function(t){for(var e=this.entitys,i=C.entity,s=0,o=e.length;s<o;s++)i[e[s]].revertStart(t);return this},C.Group.prototype.reverse=function(t){for(var e=this.entitys,i=C.entity,s=0,o=e.length;s<o;s++)i[e[s]].reverse(t);return this},C.work.d.Design.shift=0,C.work.d.Design.autoUpdate=!1,C.mergeInto(C.work.d.Gradient,C.work.d.Design),C.mergeInto(C.work.d.RadialGradient,C.work.d.Design),C.xt(C.work.d.Pattern)&&C.mergeInto(C.work.d.Pattern,C.work.d.Design),C.Design.prototype.update=function(t,e){return this.makeGradient(t,e),this.sortStops(),this.applyStops(),this},C.Design.prototype.sortStops=function(){for(var t=this.get("color"),e=this.get("shift"),i=0,s=t.length;i<s;i++)t[i].stop+=e,C.isBetween(t[i].stop,0,1,!0)||(t[i].stop=.5<t[i].stop?t[i].stop-1:t[i].stop+1),t[i].stop<=0?t[i].stop=1e-6:1<=t[i].stop&&(t[i].stop=.999999);t.sort(function(t,e){return t.stop-e.stop}),this.color=t},C.makeTicker=function(t){return new C.Ticker(t)},C.newTween=function(t){return C.makeTween(t)},C.makeTween=function(t){return new C.Tween(t)},C.newAction=function(t){return C.makeAction(t)},C.makeAction=function(t){return new C.Action(t)},C.locateTarget=function(t){var e,i,s,o,n=["entity","cell","pad","stack","element","point","group","design","animation","tween","anim","filter","image","force","spring","physics"],r=(C.contains,C.xt);if(C.xt(t)&&t.substring)for(s=0,o=n.length;s<o;s++)if(r(C[i=(e=n[s])+"names"])&&0<=C[i].indexOf(t))return C[e][t];return!1},C.Ticker=function(t){var e=C.xtGet;return C.Base.call(this,t),t=C.safeObject(t),this.order=e(t.order,0),this.subscribers=[],this.duration=e(t.duration,0),this.eventChoke=e(t.eventChoke,0),this.killOnComplete=e(t.killOnComplete,!1),this.cycles=e(t.cycles,1),this.cycleCount=0,this.active=!1,this.effectiveDuration=0,this.startTime=0,this.currentTime=0,this.tick=0,this.lastEvent=0,t.subscribers&&this.subscribe(t.subscribers),this.setEffectiveDuration(),C.animation[this.name]=this,C.pushUnique(C.animationnames,this.name),this},C.Ticker.prototype=Object.create(C.Base.prototype),C.Ticker.prototype.type="Ticker",C.Ticker.prototype.classname="animationnames",C.work.d.Ticker={order:0,duration:0,subscribers:[],killOnComplete:!1,cycles:1,eventChoke:0},C.mergeInto(C.work.d.Ticker,C.work.d.Base),C.Ticker.prototype.makeTickerUpdateEvent=function(){var t=null,e={name:this.name,type:"Ticker",tick:this.tick,reverseTick:this.effectiveDuration-this.tick};return window.MSInputMethodContext?(t=document.createEvent("CustomEvent")).initCustomEvent("tickerupdate",!0,!0,e):window.CustomEvent&&(t=new CustomEvent("tickerupdate",{detail:e,bubbles:!0,cancelable:!0})),t},C.Ticker.prototype.subscribe=function(t){for(var e,i=[].concat(t),s=C.pushUnique,o=C.safeObject,n=0,r=i.length;n<r;n++)(e=(e=i[n]).substring?e:o(e).name||!1)&&s(this.subscribers,e);return i.length&&(this.sortSubscribers(),this.recalculateEffectiveDuration()),this},C.Ticker.prototype.unsubscribe=function(t){for(var e,i=[].concat(t),s=C.removeItem,o=C.safeObject,n=0,r=i.length;n<r;n++)(e=(e=t[n]).substring?e:o(e).name||!1)&&s(this.subscribers,e);return i.length&&(this.sortSubscribers(),this.recalculateEffectiveDuration()),this},C.Ticker.prototype.recalculateEffectiveDuration=function(){var t,e,i,s=0,o=C.tween;if(this.duration)this.setEffectiveDuration();else{for(t=0,e=this.subscribers.length;t<e;t++)s<(i=o[this.subscribers[t]].getEndTime())&&(s=i);this.effectiveDuration=s}return this},C.Ticker.prototype.setEffectiveDuration=function(){var t;return this.duration&&("%"===(t=C.convertTime(this.duration))[0]?(this.duration=0,this.recalculateEffectiveDuration()):this.effectiveDuration=t[1]),this},C.Ticker.prototype.sortSubscribers=function(){C.bucketSort("tween","effectiveTime",this.subscribers)},C.Ticker.prototype.set=function(t){t=C.safeObject(t);var e,i,s,o=C.xt;if(o(t.order)&&(this.order=t.order,this.active&&(C.work.resortAnimations=!0)),o(t.cycles)&&(this.cycles=t.cycles,this.cycles||(this.cycleCount=0)),o(t.subscribers)&&(this.subscribers=[],this.subscribe(t.subscribers)),o(t.duration))for(this.duration=t.duration,this.setEffectiveDuration(),e=0,i=this.subscribers.length;e<i;e++)(s=C.tween[this.subscribers[e]]).calculateEffectiveTime(),"Tween"===s.type&&s.calculateEffectiveDuration();return o(t.killOnComplete)&&(this.killOnComplete=t.killOnComplete),o(t.eventChoke)&&(this.eventChoke=t.eventChoke),this},C.Ticker.prototype.fn=function(t){var e,i,s,o,n=C.tween,r={tick:0,reverseTick:0,willLoop:!1,next:!1};if(t=!!C.xt(t)&&t,this.active&&this.startTime&&(!this.cycles||this.cycleCount<this.cycles)){for(this.currentTime=Date.now(),this.tick=this.currentTime-this.startTime,!this.cycles||this.cycleCount+1<this.cycles?(this.tick>=this.effectiveDuration?(this.tick=0,this.startTime=this.currentTime,r.tick=this.effectiveDuration,r.reverseTick=0,r.willLoop=!0,this.cycles&&this.cycleCount++):(r.tick=this.tick,r.reverseTick=this.effectiveDuration-this.tick),r.next=!0):this.tick>=this.effectiveDuration?(r.tick=this.effectiveDuration,r.reverseTick=0,this.active=!1,this.cycles&&this.cycleCount++):(r.tick=this.tick,r.reverseTick=this.effectiveDuration-this.tick,r.next=!0),s=[].concat(this.subscribers),t&&s.reverse(),e=0,i=s.length;e<i;e++)n[s[e]].update(r);this.eventChoke&&this.lastEvent+this.eventChoke<(o=Date.now())&&(t=this.makeTickerUpdateEvent(),window.dispatchEvent(t),this.lastEvent=o),this.active||this.halt(),this.killOnComplete&&this.cycleCount>=this.cycles&&this.killTweens(!0)}return this},C.Ticker.prototype.updateSubscribers=function(t,e){var i=[].concat(this.subscribers);(e=!!C.xt(e)&&e)&&i.reverse();for(var s=0,o=i.length;s<o;s++)r.tween[i[s]].set(t);return this},C.Ticker.prototype.changeSubscriberDirection=function(){for(var t,e=[].concat(this.subscribers),i=0,s=e.length;i<s;i++)(t=r.tween[e[i]]).reversed=!t.reversed;return this},C.Ticker.prototype.run=function(){return this.active||(this.startTime=this.currentTime=Date.now(),this.cycleCount=0,this.updateSubscribers({reversed:!1}),this.active=!0,this.fn(!0),C.pushUnique(C.work.animate,this.name),C.work.resortAnimations=!0),this},C.Ticker.prototype.reset=function(){return this.active&&this.halt(),this.startTime=this.currentTime=Date.now(),this.cycleCount=0,this.updateSubscribers({reversed:!1}),this.active=!0,this.fn(!0),this.active=!1,this},C.Ticker.prototype.complete=function(){return this.active&&this.halt(),this.startTime=this.currentTime=Date.now(),this.cycleCount=0,this.updateSubscribers({reversed:!0}),this.active=!0,this.fn(),this.active=!1,this},C.Ticker.prototype.reverse=function(){var t;return this.active&&this.halt(),t=this.currentTime-this.startTime,this.startTime=this.currentTime-(this.effectiveDuration-t),this.changeSubscriberDirection(),this.active=!0,this.fn(),this.active=!1,this},C.Ticker.prototype.halt=function(){return this.active=!1,C.removeItem(C.work.animate,this.name),C.work.resortAnimations=!0,this},C.Ticker.prototype.resume=function(){var t,e,i;return this.active||(t=Date.now(),e=this.currentTime,i=this.startTime,this.startTime=t-(e-i),this.currentTime=t,this.active=!0,C.pushUnique(C.work.animate,this.name),C.work.resortAnimations=!0),this},C.Ticker.prototype.seekTo=function(t,e){var i=C.xtGet,s=!1;return t=i(t,0),e=i(e,!1),this.active&&this.halt(),this.cycles&&this.cycleCount>=this.cycles&&(this.cycleCount=this.cycles-1),t<this.tick&&(s=!0),this.currentTime=Date.now(),this.startTime=this.currentTime-t,this.active=!0,this.fn(s),this.active=!1,e&&this.resume(),this},C.Ticker.prototype.seekFor=function(t,e){var i=C.xtGet,s=!1;return t=i(t,0),t=i(e,!1),this.active&&this.halt(),this.cycles&&this.cycleCount>=this.cycles&&(this.cycleCount=this.cycles-1),this.startTime-=t,t<0&&(s=!0),this.active=!0,this.fn(s),this.active=!1,e&&this.resume(),this},C.Ticker.prototype.kill=function(){return this.active&&this.halt(),delete C.animation[this.name],C.removeItem(C.animationnames,this.name),C.removeItem(C.work.animate,this.name),C.work.resortAnimations=!0},C.Ticker.prototype.killTweens=function(t){var e,i,s=C.tween;for(t=!!C.xt(t)&&t,e=0,i=this.subscribers.length;e<i;e++)s[this.subscribers[e]].kill();return t?(this.kill(),!0):this},C.Action=function(t){var e=C.xtGet;return C.Base.call(this,t),t=C.safeObject(t),C.xt(t.targets)?this.setTargets(t.targets):this.targets=[],this.reverseOnCycleEnd=e(t.reverseOnCycleEnd,!1),this.reversed=e(t.reversed,!1),this.action="function"==typeof t.action?t.action:function(){},this.revert="function"==typeof t.revert?t.revert:function(){},this.time=e(t.time,0),this.order=e(t.order,0),this.triggered=!1,this.calculateEffectiveTime(),C.tween[this.name]=this,C.pushUnique(C.tweennames,this.name),this.ticker="",C.xt(t.ticker)&&this.addToTicker(t.ticker),this},C.Action.prototype=Object.create(C.Base.prototype),C.Action.prototype.type="Action",C.Action.prototype.classname="tweennames",C.work.d.Action={ticker:"",targets:[],action:function(){},revert:function(){},time:0,reverseOnCycleEnd:!1,reversed:!1,order:0},C.mergeInto(C.work.d.Action,C.work.d.Base),C.Action.prototype.calculateEffectiveTime=function(t){var e,i=C.xtGet(t,this.time),s=C.convertTime(i),t=s[1],i=s[0];return this.effectiveTime=0,"%"===i&&t<=100?this.ticker&&(e=C.animation[this.ticker])&&(s=e.effectiveDuration,this.effectiveTime=s*(t/100)):this.effectiveTime=t,this},C.Action.prototype.addToTicker=function(t){var e=C.xt;return e(t)&&(this.ticker&&this.ticker!==t&&this.removeFromTicker(this.ticker),e(e=C.animation[t])&&(this.ticker=t,e.subscribe(this.name),this.calculateEffectiveTime())),this},C.Action.prototype.removeFromTicker=function(t){var e,i=C.xt;return i(t)&&i(e=C.animation[t])&&(this.ticker="",e.unsubscribe(this.name)),this},C.Action.prototype.getEndTime=function(){return this.effectiveTime},C.Action.prototype.update=function(t){return this.reversed?t.reverseTick>=this.effectiveTime?this.triggered||(this.action(),this.triggered=!0):this.triggered&&(this.revert(),this.triggered=!1):t.tick>=this.effectiveTime?this.triggered||(this.action(),this.triggered=!0):this.triggered&&(this.revert(),this.triggered=!1),this.reverseOnCycleEnd&&t.willLoop&&(t.next?this.reversed=!this.reversed:(this.reversed=!1,this.triggered=!1)),!0},C.Action.prototype.set=function(t){var e,i=C.xt;return(e=!!i((t=C.safeObject(t)).ticker)&&this.ticker)?(this.ticker=e,this.addToTicker(t.ticker)):i(t.time)&&(this.time=t.time,this.calculateEffectiveTime()),i(t.targets)&&this.setTargets(t.targets),C.xto(t.reverseOnCycleEnd,t.reversed,t.order)&&(i(t.reverseOnCycleEnd)&&(this.reverseOnCycleEnd=t.reverseOnCycleEnd),i(t.reversed)&&(this.reversed=t.reversed),i(t.order)&&(this.order=t.order)),i(t.triggered)&&this.triggered!==t.triggered&&(t.triggered?this.action():this.revert(),this.triggered=t.triggered),i(t.action)&&(this.action=t.action,"function"!=typeof this.action&&(this.action=function(){})),i(t.revert)&&(this.revert=t.revert,"function"!=typeof this.revert&&(this.revert=function(){})),this},C.Action.prototype.setTargets=function(t){for(var e,i=[],s=0,o=(t=[].concat(t)).length;s<o;s++)"function"==typeof(e=t[s])?"function"==typeof e.set&&i.push(e):"object"===n(e)&&C.xt(e.name)?i.push(e):(e=C.locateTarget(e))&&i.push(e);return this.targets=i,this},C.Action.prototype.addToTargets=function(t){for(var e,i=0,s=(t=[].concat(t)).length;i<s;i++)"function"==typeof(e=t[i])?"function"==typeof e.set&&this.targets.push(e):(e=C.locateTarget(e))&&this.targets.push(e);return this},C.Action.prototype.removeFromTargets=function(t){t=[].concat(t);for(var e,i,s,o,n,r,a,h,c,l,u=[],p=[].concat(this.targets),d=(C.contains,0),y=p.length;d<y;d++)a=(r=p[d]).type||"unknown",h=r.name||"unnamed","unknown"!==a&&"unnamed"!==h&&u.push(a+"_"+h);for(i=0,s=t.length;i<s;i++)l=!1,(l="function"==typeof(e=t[i])?e:C.locateTarget(e))&&(a=l.type||"unknown",h=l.name||"unnamed","unknown"!==a&&"unnamed"!==h&&0<=(c=u.indexOf(a+"_"+h))&&(p[c]=!1));for(this.targets=[],o=0,n=p;o<n;o++)p[o]&&this.targets.push(p[o]);return this},C.Action.prototype.clone=function(t){t=C.safeObject(t);var e=C.xt,i=C.Base.prototype.clone.call(this,t);return e(t.targets)?i.setTargets(t.targets):i.targets=[].concat(this.targets),i.reverseOnCycleEnd=(e(t.reverseOnCycleEnd)?t:this).reverseOnCycleEnd,i.revert=(e(t.revert)?t:this).revert,i.action=(e(t.action)?t:this).action,i.revert=(e(t.revert)?t:this).revert,i.time=(e(t.time)?t:this).time,i.order=(e(t.order)?t:this).order,i.triggered=!1,i.calculateEffectiveTime(),i},C.Action.prototype.kill=function(){return this.ticker&&this.removeFromTicker(this.ticker),delete C.tween[this.name],C.removeItem(C.tweennames,this.name),!0},C.Action.prototype.updateTargets=function(t){for(var e=0,i=this.targets.length;e<i;e++)this.targets[e].set(t);return this},C.Tween=function(t){var e=C.xtGet,i=C.xt;return C.Base.call(this,t),t=C.safeObject(t),this.ticker=e(t.ticker,""),C.xt(t.targets)?this.setTargets(t.targets):this.targets=[],this.definitions=i(t.definitions)?[].concat(t.definitions):[],this.setDefinitionsValues(),this.time=e(t.time,0),this.duration=e(t.duration,0),this.reverseOnCycleEnd=e(t.reverseOnCycleEnd,!1),this.reversed=e(t.reversed,!1),this.order=e(t.order,0),this.action=!!i(t.action)&&t.action,this.status="before",this.calculateEffectiveTime(),this.calculateEffectiveDuration(),C.tween[this.name]=this,C.pushUnique(C.tweennames,this.name),this.ticker="",C.xt(t.ticker)?this.addToTicker(t.ticker):(i=this.name+"_ticker",C.makeTicker({name:i,order:this.order,subscribers:this.name,duration:this.effectiveDuration,eventChoke:e(t.eventChoke,0),cycles:e(t.cycles,1),killOnComplete:e(t.killOnComplete,!1)}),this.ticker=i,C.animation[i].recalculateEffectiveDuration()),this},C.Tween.prototype=Object.create(C.Base.prototype),C.Tween.prototype.type="Tween",C.Tween.prototype.classname="tweennames",C.work.d.Tween={ticker:"",targets:[],definitions:[],time:0,action:!1,duration:0,reverseOnCycleEnd:!1,reversed:!1,order:0},C.mergeInto(C.work.d.Tween,C.work.d.Base),C.Tween.prototype.getEndTime=function(){return this.effectiveTime+this.effectiveDuration},C.Tween.prototype.calculateEffectiveTime=function(t){return C.Action.prototype.calculateEffectiveTime.call(this,t),this},C.Tween.prototype.calculateEffectiveDuration=function(t){var e,i=C.xtGet(t,this.duration),s=C.convertTime(i),t=s[1],i=s[0];return this.effectiveDuration=0,"%"===i?this.ticker&&(e=C.animation[this.ticker])&&(s=e.effectiveDuration,this.effectiveDuration=s*(t/100)):this.effectiveDuration=t,this},C.Tween.prototype.addToTicker=function(t){return C.Action.prototype.addToTicker.call(this,t),this.calculateEffectiveDuration(),this},C.Tween.prototype.removeFromTicker=function(t){return C.Action.prototype.removeFromTicker.call(this,t),this},C.Tween.prototype.update=function(t){var e,i,s=(t=C.safeObject(t)).tick||0,o=t.reverseTick||0,n="running";return this.reversed?(e=this.effectiveTime+this.effectiveDuration,i=this.effectiveTime,e<o?n="after":o<i&&(n="before")):(e=this.effectiveTime,i=this.effectiveTime+this.effectiveDuration,s<e?n="before":i<s&&(n="after")),this.effectiveDuration?"running"!==n&&n===this.status||(this.status=n,this.doSimpleUpdate(t),this.updateCleanup(t)):n!==this.status&&(this.status=n,this.doSimpleUpdate(t),this.updateCleanup(t)),t.willLoop&&(this.reverseOnCycleEnd?this.reversed=!this.reversed:this.status="before"),!0},C.Tween.prototype.doSimpleUpdate=function(t){t=C.safeObject(t);for(var e,i,s,o=this.effectiveTime,n=C.Tween.prototype.engineActions,r={},o=this.reversed?t.reverseTick-o:t.tick-o,a=this.effectiveDuration&&"running"===this.status?o/this.effectiveDuration:"after"===this.status?1:0,h=0,c=this.definitions.length;h<c;h++)(s=this.definitions[h]).engine.substring?s.value=n[s.engine](s.effectiveStart,s.effectiveChange,a):s.value=s.engine(s.effectiveStart,s.effectiveChange,a),s.integer&&(s.value=Math.round(s.value)),s.suffix&&(s.value+=s.suffix),r[s.attribute]=s.value;for(e=0,i=this.targets.length;e<i;e++)this.targets[e].set(r);return this.action&&this.action(),!0},C.Tween.prototype.updateCleanup=function(t){return(t=C.safeObject(t)).next||(this.status=this.reverse?"before":"after"),!0},C.Tween.prototype.engineActions={out:function(t,e,i){return t+e+Math.cos(90*i*C.work.radian)*-e},in:function(t,e,i){return t+Math.sin(90*i*C.work.radian)*e},easeIn:function(t,e,i){i=1-i;return t+e+i*i*-e},easeIn3:function(t,e,i){i=1-i;return t+e+i*i*i*-e},easeIn4:function(t,e,i){i=1-i;return t+e+i*i*i*i*-e},easeIn5:function(t,e,i){i=1-i;return t+e+i*i*i*i*i*-e},easeOutIn:function(t,e,i){var s=1-i;return i<.5?t+i*i*e*2:t+e+s*s*-e*2},easeOutIn3:function(t,e,i){var s=1-i;return i<.5?t+i*i*i*e*4:t+e+s*s*s*-e*4},easeOutIn4:function(t,e,i){var s=1-i;return i<.5?t+i*i*i*i*e*8:t+e+s*s*s*s*-e*8},easeOutIn5:function(t,e,i){var s=1-i;return i<.5?t+i*i*i*i*i*e*16:t+e+s*s*s*s*s*-e*16},easeOut:function(t,e,i){return t+i*i*e},easeOut3:function(t,e,i){return t+i*i*i*e},easeOut4:function(t,e,i){return t+i*i*i*i*e},easeOut5:function(t,e,i){return t+i*i*i*i*i*e},linear:function(t,e,i){return t+i*e}},C.Tween.prototype.set=function(t){var e=C.xt,i=!!e((t=C.safeObject(t)).ticker)&&this.ticker;return C.Base.prototype.set.call(this,t),i?(this.ticker=i,this.addToTicker(t.ticker)):C.xto(t.time,t.duration)&&(this.calculateEffectiveTime(),this.calculateEffectiveDuration()),e(t.targets)&&this.setTargets(t.targets),e(t.definitions)&&(this.definitions=[].concat(t.definitions),this.setDefinitionsValues()),e(t.action)&&(this.action=t.action,"function"!=typeof this.action&&(this.action=!1)),this},C.Tween.prototype.setDefinitionsValues=function(){for(var t,e,i=C.xt,s=0,o=this.definitions.length;s<o;s++)e=this.definitions[s],t=this.parseDefinitionsValue(e.start),e.effectiveStart=t[1],e.suffix=t[0],t=this.parseDefinitionsValue(e.end),e.effectiveEnd=t[1],i(e.engine)||(e.engine="linear"),e.effectiveChange=e.effectiveEnd-e.effectiveStart;return this},C.Tween.prototype.parseDefinitionsValue=function(t){var e=["",0],i=C.xt;return i(t)&&(t.toFixed?e[1]=t:t.substring&&(i((t=t.match(/^-?\d+\.?\d*(\D*)/))[0])&&(e[1]=parseFloat(t)),i(t[1])&&(e[0]=t[1]))),e},C.Tween.prototype.setTargets=function(t){return C.Action.prototype.setTargets.call(this,t),this},C.Tween.prototype.addToTargets=function(t){return C.Action.prototype.addToTargets.call(this,t),this},C.Tween.prototype.removeFromTargets=function(t){return C.Action.prototype.removeFromTargets.call(this,t),this},C.Tween.prototype.clone=function(t){var e=C.Base.prototype.clone.call(this,t);return(t=C.safeObject(t)).targets||e.setTargets(this.targets),e},C.Tween.prototype.run=function(){var t=C.animation[this.ticker];return t&&t.run(),this},C.Tween.prototype.halt=function(){var t=C.animation[this.ticker];return t&&t.halt(),this},C.Tween.prototype.resume=function(){var t=C.animation[this.ticker];return t&&t.resume(),this},C.Tween.prototype.seekTo=function(t){var e=C.animation[this.ticker];return e&&e.seekTo(t),this},C.Tween.prototype.seekFor=function(t){var e=C.animation[this.ticker];return e&&e.seekFor(t),this},C.Tween.prototype.kill=function(){var t;this.ticker===this.name+"_ticker"&&(t=C.animation[this.ticker])&&t.kill(),C.Action.prototype.kill.call(this)};return C}(),l=r;e.default={init:function(){l.init()},radialGradient:null,gradient1:null,gradient2:null,spotlight:null,light1:null,light2:null,animation:null,draw:function(e,i){this.radialGradient&&(this.animation.kill(),this.radialGradient.remove(),this.gradient1.remove(),this.gradient2.remove(),l.deleteEntity(["spotlightBlock","lightBlock1","lightBlock2"]),this.radialGradient=null);var s={x:0,y:0},o=100,n=0,r=!0;this.radialGradient=l.makeRadialGradient({name:"spotlight",startRadius:0,endRadius:o,color:[{color:"rgba(0,0,0,0)",stop:0},{color:"rgba(0,0,0,0)",stop:.8},{color:"rgba(0,0,0,0.2)",stop:1}]}),this.gradient1=l.makeGradient({name:"light1",startX:0,startY:0,endX:0,endY:0,color:[{color:"rgba(0,0,0,0.3)",stop:0},{color:"rgba(0,0,0,0)",stop:.2},{color:"rgba(0,0,0,0)",stop:.8},{color:"rgba(0,0,0,0.3)",stop:1}]}),this.gradient2=this.gradient1.clone({name:"light2"}),this.spotlight=l.makeBlock({name:"spotlightBlock",fillStyle:"spotlight",method:"fill",width:e,height:i,order:1}),this.light1=this.spotlight.clone({name:"lightBlock1",fillStyle:"light1"}),this.light2=this.spotlight.clone({name:"lightBlock2",fillStyle:"light2"});var a=this;function h(t,e){var i=Math.sqrt(t*t+e*e),i=[t/i,e/i];return[-i[1],i[0]]}this.animation=l.makeAnimation({fn:function(){!function(){var t=0;o=16/9<=e/i?(t=.3,e/10):(t=.15*i/(e/2),i/10);s={x:e/2*(1+n),y:i/5*3},r?n+=.02*(.1+Math.abs(t-Math.abs(n))):n-=.02*(.1+Math.abs(t-Math.abs(n)));Math.abs(n)>t&&(r=!r)}(),a.spotlight.set({width:e,height:i}),a.light1.set({width:e,height:i}),a.light2.set({width:e,height:i}),a.radialGradient.set({startX:s.x,startY:s.y,endX:s.x,endY:s.y,endRadius:o});var t=h(s.x,s.y);a.gradient1.set({startX:t[0]*o,startY:t[1]*o,endX:-t[0]*o,endY:-t[1]*o});t=h(s.x-e,s.y);a.gradient2.set({startX:t[0]*o+e,startY:t[1]*o,endX:-t[0]*o+e,endY:-t[1]*o}),l.render()}})}}}}]);
//# sourceMappingURL=scrawl_canvas_animate.041915d5f11c7df3009d.bundle.js.map